(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1182],{42538:(e,o,s)=>{Promise.resolve().then(s.bind(s,86047))},92080:(e,o,s)=>{"use strict";s.d(o,{A:()=>i});var t=s(12983),r=s(95155);let i=(0,t.A)((0,r.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")},52035:(e,o,s)=>{"use strict";s.d(o,{A:()=>i});var t=s(12983),r=s(95155);let i=(0,t.A)((0,r.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},7495:(e,o,s)=>{"use strict";s.d(o,{A:()=>i});var t=s(12983),r=s(95155);let i=(0,t.A)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")},6327:(e,o,s)=>{"use strict";s.d(o,{A:()=>i});var t=s(12983),r=s(95155);let i=(0,t.A)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},1535:(e,o,s)=>{"use strict";s.d(o,{A:()=>i});var t=s(12983),r=s(95155);let i=(0,t.A)((0,r.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email")},86802:(e,o,s)=>{"use strict";s.d(o,{A:()=>v});var t=s(12115),r=s(43463),i=s(62181),a=s(37157),l=s(7123),n=s(82637),c=s(25273),d=s(8383),x=s(91814),h=s(29214),u=s(86217),m=s(95155);let p=(0,x.A)(),j=(0,n.A)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,o)=>o.root});function A(e){return(0,c.A)({props:e,name:"MuiStack",defaultTheme:p})}let f=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],g=({ownerState:e,theme:o})=>{let s={display:"flex",flexDirection:"column",...(0,h.NI)({theme:o},(0,h.kW)({values:e.direction,breakpoints:o.breakpoints.values}),e=>({flexDirection:e}))};if(e.spacing){let t=(0,u.LX)(o),r=Object.keys(o.breakpoints.values).reduce((o,s)=>(("object"==typeof e.spacing&&null!=e.spacing[s]||"object"==typeof e.direction&&null!=e.direction[s])&&(o[s]=!0),o),{}),a=(0,h.kW)({values:e.direction,base:r}),l=(0,h.kW)({values:e.spacing,base:r});"object"==typeof a&&Object.keys(a).forEach((e,o,s)=>{if(!a[e]){let t=o>0?a[s[o-1]]:"column";a[e]=t}}),s=(0,i.A)(s,(0,h.NI)({theme:o},l,(o,s)=>e.useFlexGap?{gap:(0,u._W)(t,o)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${f(s?a[s]:e.direction)}`]:(0,u._W)(t,o)}}))}return(0,h.iZ)(o.breakpoints,s)};var C=s(89142),b=s(49757);let v=function(e={}){let{createStyledComponent:o=j,useThemeProps:s=A,componentName:i="MuiStack"}=e,n=()=>(0,l.A)({root:["root"]},e=>(0,a.Ay)(i,e),{}),c=o(g);return t.forwardRef(function(e,o){let i=s(e),{component:a="div",direction:l="column",spacing:x=0,divider:h,children:u,className:p,useFlexGap:j=!1,...A}=(0,d.A)(i),f=n();return(0,m.jsx)(c,{as:a,ownerState:{direction:l,spacing:x,useFlexGap:j},ref:o,className:(0,r.A)(f.root,p),...A,children:h?function(e,o){let s=t.Children.toArray(e).filter(Boolean);return s.reduce((e,r,i)=>(e.push(r),i<s.length-1&&e.push(t.cloneElement(o,{key:`separator-${i}`})),e),[])}(u,h):u})})}({createStyledComponent:(0,C.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,o)=>o.root}),useThemeProps:e=>(0,b.A)({props:e,name:"MuiStack"})})},86047:(e,o,s)=>{"use strict";s.r(o),s.d(o,{default:()=>I});var t=s(95155),r=s(23165),i=s(2572),a=s(19293),l=s(92608),n=s(2241),c=s(9561),d=s(86802),x=s(22282),h=s(894),u=s(80906),m=s(10897),p=s(84920),j=s(9581),A=s(7495),f=s(92080),g=s(48123),C=s(52035),b=s(6327),v=s(1535),w=s(51991),y=s(70689),z=s(30251),S=s(12115),k=s(6283),E=s(8889),D=s(48097),N=s(67396);let I=()=>{let{auth:e,setClienteV:o}=(0,y.A)(),[s,I]=(0,S.useState)(!1),[R,T]=(0,S.useState)(!1),[M,L]=(0,S.useState)(!1),[P,V]=(0,S.useState)(!1),[F,H]=(0,S.useState)([]),[W,B]=(0,S.useState)([]),[_,O]=(0,S.useState)(""),[G,X]=(0,S.useState)([]),[Y,$]=(0,S.useState)([]),[Z,q]=(0,S.useState)(Y?Y.Email:""),J=(0,r.A)("(max-width: 600px)"),K=()=>{T(!1)},Q=e=>{let s=W.find(o=>o.NIT===e.Cliente);s&&($(s),q(s.Email),I(!0),o(s))},U=()=>{$(null),I(!1)};(0,S.useEffect)(()=>{(async()=>{try{let o=await (0,k.Xv)(),s=await o.getAll("cartera");if(s.length>0)H(s),X(s),console.log("Datos cargados desde IndexedDB");else{let s=await fetch(E.m.url+"/carterasellers/".concat(e.IDSaler),{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("Error en la solicitud: ".concat(s.status));let t=await s.json();for(let e of(H(t.cxc),X(t.cxc),t.cxc))await o.add("cartera",e);console.log("Datos guardados en IndexedDB"),console.log("Datos cargados desde la API")}}catch(e){console.log("Error al obtener los productos",e)}})()},[]);let ee=e=>{H(G.filter(o=>Object.values(o).map(e=>e?e.toString().toLowerCase():"").some(o=>o.includes(e.toLowerCase()))))};(0,S.useEffect)(()=>{(async()=>{try{let e=await (0,k.Xv)(),o=await e.getAll("customers");o.length>0?(B(o),console.log("Datos cargados desde la base de datos")):console.log("No se encontraron art\xedculos en la base de datos.")}catch(e){console.log("Error al obtener los clientes:",e)}})()},[]);let eo=async()=>{console.log("Enviando correo actualizado: ",{NIT:Y.NIT,Email:Y.Email,PutEmail:Z});try{V(!0),K()}catch(e){L(!0),console.error("Error al actualizar el correo:",e)}},es=e=>{"clicaway"!==e&&(V(!1),L(!1))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.A,{}),(0,t.jsxs)(D.A,{container:!0,direction:"column",sx:{minHeight:"100vh",backfroundColor:"#ffffff",padding:2},children:[(0,t.jsx)(D.A,{size:12,children:(0,t.jsxs)(i.A,{sx:{display:"flex",flexDirection:J?"column":"row",alignItems:"center"},children:[(0,t.jsx)("h2",{children:(0,t.jsx)("strong",{children:"CARTERA CLIENTES"})}),(0,t.jsx)(i.A,{sx:{display:"flex",flexDirection:J?"column":"row",alignItems:"center",marginLeft:J?0:"auto",padding:2},children:(0,t.jsx)(a.A,{id:"outlined-basic",label:"Buscar...",variant:"outlined",value:_,onChange:e=>{e.preventDefault(),O(e.target.value),ee(e.target.value)},sx:{width:J?300:500}})})]})}),(0,t.jsx)(D.A,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,t.jsx)(i.A,{sx:{width:"100%",height:J?800:1170},children:(0,t.jsx)(z.z,{rows:F,columns:[{field:"Cliente",headerName:"Nit",width:150},{field:"RazonSocial",headerName:"Razon Social",width:350},{field:"Documento",headerName:"Documento",width:150},{field:"TipoDocumento",headerName:"Tipo",width:80},{field:"Monto",headerName:"Monto",width:150},{field:"FechaDocumento",headerName:"Fecha Documento",width:150},{field:"FechaVencimiento",headerName:"Fecha Vencimiento",width:150},{field:"Plazo",headerName:"Plazo (d\xedas)",width:90},{field:"DiasVencimiento",headerName:"D\xedas Vencidos",width:100},{field:"Saldo",headerName:"Saldo",width:150}],getRowId:e=>e.Documento,initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20],onRowClick:e=>Q(e.row)})})})]}),(0,t.jsx)(l.A,{open:s,onClose:U,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,t.jsxs)(i.A,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"750px",width:"90%",height:"90vh",overflowY:"auto",margin:"auto",mt:4,p:2},children:[Y&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{children:(0,t.jsx)("strong",{style:{fontSize:20,color:"#1be0e7"},children:Y.RazonSocial})}),(0,t.jsx)(n.A,{}),(0,t.jsxs)(D.A,{container:!0,rowSpacing:1.5,columnSpacing:{xs:1,sm:2,md:3},sx:{p:1},children:[(0,t.jsxs)(D.A,{size:{xs:9,sm:6,md:3},children:[(0,t.jsx)("strong",{children:"NIT"}),(0,t.jsx)(c.A,{sx:{mb:1.5,display:"flex"},children:Y.NIT})]}),(0,t.jsxs)(D.A,{size:{xs:9,sm:6,md:3},children:[(0,t.jsx)("strong",{children:"Cupo"}),(0,t.jsx)(c.A,{sx:{mb:1.5,display:"flex"},children:Y.CupoCreditoCliente})]}),(0,t.jsxs)(D.A,{size:{xs:9,sm:6,md:3},children:[(0,t.jsx)("strong",{children:"Debe"}),(0,t.jsx)(c.A,{sx:{mb:1.5,display:"flex",color:"#f01212"},children:Y.TotalCartera})]}),(0,t.jsxs)(D.A,{size:{xs:9,sm:6,md:3},children:[(0,t.jsx)("strong",{children:"Tel\xe9fono"}),(0,t.jsx)(c.A,{sx:{mb:1.5,display:"flex"},children:Y.Telefono})]}),(0,t.jsxs)(D.A,{size:{xs:9,sm:6,md:3},children:[(0,t.jsx)("strong",{children:"Celular"}),(0,t.jsx)(c.A,{sx:{mb:1.5,display:"flex"},children:Y.Celular})]}),(0,t.jsxs)(D.A,{size:{xs:9,sm:6,md:3},children:[(0,t.jsx)("strong",{children:"Fax"}),(0,t.jsx)(c.A,{sx:{mb:1.5,display:"flex"},children:Y.Fax})]}),(0,t.jsxs)(D.A,{size:{xs:6,sm:4,md:3},children:[(0,t.jsx)("strong",{children:"Direcci\xf3n"}),(0,t.jsx)(c.A,{sx:{mb:1.5,display:"flex"},children:Y.Direccion})]}),(0,t.jsxs)(D.A,{size:{xs:9,sm:6,md:3},children:[(0,t.jsx)("strong",{children:"Ciudad"}),(0,t.jsx)(c.A,{sx:{mb:1.5,display:"flex"},children:Y.CityName})]}),(0,t.jsxs)(D.A,{size:{xs:9,sm:6,md:3},children:[(0,t.jsx)("strong",{children:"Departamento"}),(0,t.jsx)(c.A,{sx:{mb:1.5,display:"flex"},children:Y.DepartmentName})]}),(0,t.jsxs)(D.A,{size:{xs:18,sm:12,md:6},children:[(0,t.jsx)("strong",{children:"Email"}),(0,t.jsx)(c.A,{sx:{mb:1.5,display:"flex"},children:Y.Email})]})]}),(0,t.jsx)(a.A,{id:"outlined-basic",multiline:!0,rows:3,defaultValue:Y.Comentarios,variant:"outlined",sx:{width:"100%",border:"2px solid #1be0e7"}})]}),(0,t.jsx)(n.A,{sx:{margin:2}}),(0,t.jsxs)(d.A,{direction:"row",spacing:2,sx:{flexWrap:"wrap",justifyContent:"center",p:2},children:[(0,t.jsx)(x.A,{variant:"outlined",startIcon:(0,t.jsx)(f.A,{}),sx:{color:"#29e5ad",margin:"2px"},component:N.default,href:"./client/pedidos",children:"Pedidos"}),(0,t.jsx)(x.A,{variant:"outlined",startIcon:(0,t.jsx)(p.A,{}),sx:{color:"#e52990",margin:"2px"},component:N.default,href:"./client/rutero",children:"Realizar Rutero"}),(0,t.jsx)(x.A,{variant:"outlined",startIcon:(0,t.jsx)(v.A,{}),color:"success",onClick:()=>{T(!0)},children:"Actualizar Correo"}),(0,t.jsx)(x.A,{variant:"outlined",startIcon:(0,t.jsx)(g.A,{}),color:"secondary",component:N.default,href:"./client/recibo",children:"Ver Recibos"}),(0,t.jsx)(x.A,{variant:"outlined",startIcon:(0,t.jsx)(j.A,{}),sx:{color:"#2948e5",margin:"2px"},LinkComponent:N.default,href:"./client/crearRecibo",children:"Realizar Recibo"}),(0,t.jsx)(x.A,{variant:"contained",startIcon:(0,t.jsx)(b.A,{}),color:"error",onClick:U,children:"Cerrar"})]})]})}),(0,t.jsx)(l.A,{open:R,onClose:K,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,t.jsxs)(i.A,{sx:{p:2,backgroundColor:"white",borderRadius:"8px",maxWidth:"555px",width:"90%",height:"55vh",overflowY:"auto",margin:"auto",mt:2},children:[(0,t.jsx)("h3",{children:"Actualizar Correo Electr\xf3nico"}),(0,t.jsx)(n.A,{}),(0,t.jsx)("h3",{children:Y&&Y.RazonSocial}),(0,t.jsx)("h3",{children:"EMAIL: "}),(0,t.jsx)(a.A,{label:"Correo Electr\xf3nico",variant:"outlined",fullWidth:!0,margin:"normal",value:Z,onChange:e=>q(e.target.value)}),(0,t.jsx)(n.A,{}),(0,t.jsxs)(i.A,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[(0,t.jsx)(h.A,{color:"success",onClick:eo,children:(0,t.jsx)(A.A,{sx:{fontSize:40}})}),(0,t.jsx)(h.A,{color:"error",onClick:K,children:(0,t.jsx)(C.A,{sx:{fontSize:40}})})]})]})}),P?(0,t.jsx)(u.A,{open:P,autoHideDuration:6e3,onClose:es,children:(0,t.jsx)(m.A,{onClose:es,severity:"success",sx:{width:"100%"},children:"Correo actualizado con \xe9xito"})}):"",M?(0,t.jsx)(u.A,{open:M,autoHideDuration:6e3,onClose:es,children:(0,t.jsx)(m.A,{onClose:es,severity:"error",sx:{width:"100%"},children:"Hubo un error al actualizar el correo"})}):""]})}}},e=>{var o=o=>e(e.s=o);e.O(0,[8320,3509,4017,4269,5065,251,1647,3882,1991,8441,1517,7358],()=>o(42538)),_N_E=e.O()}]);