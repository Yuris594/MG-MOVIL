(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5098],{24152:(e,a,s)=>{Promise.resolve().then(s.bind(s,87533))},87533:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var i=s(95155),n=s(89142),r=s(23165),l=s(2572),o=s(19293),t=s(92608),d=s(2241),c=s(12406),h=s(78562),m=s(47335),x=s(27315),u=s(18786),j=s(2432),g=s(22282),A=s(24525),p=s(62783),C=s(51991),b=s(70689),f=s(30251),N=s(12115),w=s(48097),E=s(8889);let S=(0,n.Ay)(A.A)(e=>{let{theme:a}=e;return{["&.".concat(p.A.head)]:{backgroundColor:a.palette.common.black,color:a.palette.common.white},["&.".concat(p.A.body)]:{fontSize:14}}}),k=[{field:"ID",headerName:"Id Consiganci\xf3n",width:150,headerClassName:"header-bold"},{field:"BankName",headerName:"Banco",width:400,headerClassName:"header-bold"},{field:"ConsignmentNumber",headerName:"Numero de Consignaci\xf3n",width:250,headerClassName:"header-bold"},{field:"UserFullName",headerName:"Elaborada Por",width:150,headerClassName:"header-bold"},{field:"Date",headerName:"Fecha",width:180,headerClassName:"header-bold"},{field:"Ammount",headerName:"Total Consignaci\xf3n",width:170,headerClassName:"header-bold"}],y=()=>{let{auth:e}=(0,b.A)(),[a,s]=(0,N.useState)([]),[n,p]=(0,N.useState)(!1),[y,I]=(0,N.useState)([]),[z,v]=(0,N.useState)(""),[D,T]=(0,N.useState)([]),[F,O]=(0,N.useState)([]),R=(0,r.A)("(max-width: 600px)"),B=async a=>{O(a),p(!0),console.log(a);try{let s=await fetch(E.m.url+"/receipts/consult/ConsignmentDetail?ID=".concat(e.IDSaler,"&data=").concat(a.ID),{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("Error en la solicitud: ".concat(s.status));let i=await s.json();I(i),console.log(i)}catch(e){console.log("Error al obtener los datos del recibo",e)}},L=()=>{O(null),p(!1)};(0,N.useEffect)(()=>{(async()=>{try{let a=await fetch(E.m.url+"/consignments/list",{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Error en la solicitud: ".concat(a.status));let i=(await a.json()).filter(a=>a.UserFullName===e.UserFullName);s(i),T(i)}catch(e){console.log("Error al adquirir los datos",e)}})()},[]);let P=e=>{s(D.filter(a=>Object.values(a).map(e=>e?e.toString().toLowerCase():"").some(a=>a.includes(e.toLowerCase()))))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.A,{}),(0,i.jsxs)(w.A,{container:!0,direction:"column",sx:{minHeight:"100vh",backfroundColor:"#ffffff",padding:2},children:[(0,i.jsx)(w.A,{size:12,children:(0,i.jsxs)(l.A,{sx:{display:"flex",flexDirection:R?"column":"row",alignItems:"center"},children:[(0,i.jsx)("h2",{children:(0,i.jsx)("strong",{children:"CONSIGNACIONES"})}),(0,i.jsx)(l.A,{sx:{display:"flex",flexDirection:R?"column":"row",alignItems:"center",marginLeft:R?0:"auto",padding:2},children:(0,i.jsx)(o.A,{id:"outlined-basic",label:"Buscar...",multiline:!0,rows:1,variant:"outlined",value:z,onChange:e=>{v(e.target.value),P(e.target.value)},sx:{width:R?300:400}})})]})}),(0,i.jsx)(w.A,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,i.jsx)(l.A,{sx:{width:"100%",height:R?500:755},children:(0,i.jsx)(f.z,{rows:a,columns:k,getRowId:e=>e.ID,initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20],onRowClick:e=>B(e.row)})})})]}),(0,i.jsx)(t.A,{open:n,onClose:L,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,i.jsxs)(l.A,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"800px",height:"90%",height:"70vh",overflowY:"auto",margin:"auto",mt:4,p:2},children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{children:"DETALLE DE CONSIGNACI\xd3N"}),(0,i.jsx)(d.A,{}),F&&(0,i.jsxs)(w.A,{container:!0,rowSpacing:1.5,columnSpacing:{xs:1,sm:2,md:3},sx:{p:1},children:[(0,i.jsxs)(w.A,{size:{xs:10,sm:8,md:6},children:[(0,i.jsx)("strong",{children:"Banco: "}),F.BankName]}),(0,i.jsxs)(w.A,{size:{xs:10,sm:8,md:6},children:[(0,i.jsx)("strong",{children:"Numero de Consignaci\xf3n: "}),F.ConsignmentNumber]}),(0,i.jsxs)(w.A,{size:{xs:8,sm:6,md:4},children:[(0,i.jsx)("strong",{children:"Fecha: "}),F.Date]}),(0,i.jsxs)(w.A,{size:{xs:8,sm:6,md:4},children:[(0,i.jsx)("strong",{children:"Elaborada Por: "}),F.UserFullName]}),(0,i.jsxs)(w.A,{size:{xs:8,sm:6,md:4},children:[(0,i.jsx)("strong",{children:"Total Consignaci\xf3n: "}),F.Ammount]})]}),F&&(0,i.jsx)(o.A,{id:"outlined-basic",multiline:!0,rows:2,defaultValue:F.Comentarios,variant:"outlined",label:"Comentarios",sx:{width:"100%",mb:2}})]}),(0,i.jsx)(c.A,{component:h.A,children:(0,i.jsxs)(m.A,{sx:{width:"100%",heigth:"auto"},size:"small","aria-label":"simple table",children:[(0,i.jsx)(x.A,{children:(0,i.jsxs)(u.A,{children:[(0,i.jsx)(S,{children:"N\xb0 Recibo"}),(0,i.jsx)(S,{children:"Nit"}),(0,i.jsx)(S,{children:"Raz\xf3n Social"}),(0,i.jsx)(S,{children:"Fecha Recibo"}),(0,i.jsx)(S,{children:"Valor Recibo"}),(0,i.jsx)(S,{children:"Registrado Por"}),(0,i.jsx)(S,{children:"Estado"})]})}),(0,i.jsx)(j.A,{children:Array.isArray(y)&&y.map(e=>(0,i.jsxs)(u.A,{children:[(0,i.jsx)(A.A,{children:e.CONSECUTIVO}),(0,i.jsx)(A.A,{children:e.NIT}),(0,i.jsx)(A.A,{children:e.RazonSocial}),(0,i.jsx)(A.A,{children:e.FECHA}),(0,i.jsx)(A.A,{children:e.TOTAL}),(0,i.jsx)(A.A,{children:e.U1}),(0,i.jsx)(A.A,{children:e.StateName})]},e.ID))})]})}),(0,i.jsx)(l.A,{sx:{display:"flex",justifyContent:"flex-end",margin:2},children:(0,i.jsx)(g.A,{variant:"contained",onClick:L,children:"Cerrar"})})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[8320,3509,4017,4269,5065,251,1647,2420,1991,8441,1517,7358],()=>a(24152)),_N_E=e.O()}]);