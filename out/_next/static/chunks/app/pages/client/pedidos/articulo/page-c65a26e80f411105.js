(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6968],{12852:(e,a,t)=>{Promise.resolve().then(t.bind(t,54941))},6283:(e,a,t)=>{"use strict";t.d(a,{Xv:()=>o});var r=t(10733);let o=async()=>await (0,r.P2)("IDBService",1,{upgrade(e){e.createObjectStore("articles",{keyPath:"PKcodigo"}),e.createObjectStore("cartera",{keyPath:"Documento"}),e.createObjectStore("customers",{keyPath:"ID"})}})},54941:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>g});var r=t(95155),o=t(23165),d=t(19293),i=t(2572),l=t(22282),s=t(2241),n=t(6283),c=t(30251),h=t(12115),m=t(48097);let g=e=>{let{handleClose:a,onAgregarArticulo:t}=e,[g,u]=(0,h.useState)([]),[x,p]=(0,h.useState)(""),[f,C]=(0,h.useState)({}),[w,N]=(0,h.useState)([]),b=(0,o.A)("(max-width: 600px)");(0,h.useEffect)(()=>{(async()=>{try{let e=await (0,n.Xv)(),a=await e.getAll("articles");a.length>0?(u(a),N(a),console.log("Datos cargados desde la base de datos")):console.log("No se encontraron art\xedculos en la base de datos.")}catch(e){console.log("Error al obtener los productos:",e)}})()},[]);let v=(e,a)=>{C({...f,[e]:a})},j=e=>{u(w.filter(a=>Object.values(a).map(e=>e?e.toString().toLowerCase():"").some(a=>a.includes(e.toLowerCase()))))},A=[{field:"PKcodigo",headerName:"COD",width:100,headerClassName:"header-bold"},{field:"Nombre",headerName:"REFERENCIA",width:280,headerClassName:"header-bold"},{field:"Unidad_Empaque",headerName:"EMP",width:80,headerClassName:"header-bold"},{field:"Precio",headerName:"PRECIO",width:90,editable:!0,valueFormatter:e=>{let a=parseFloat(e).toFixed(0);return"$".concat(parseFloat(a).toLocaleString())},headerClassName:"header-bold"},{field:"Iva",headerName:"IVA",width:80,headerClassName:"header-bold"},{field:"Descuento",headerName:"DESC",width:80,editable:!0,headerClassName:"header-bold"},{field:"cantped",headerName:"CANT",width:100,headerClassName:"header-bold",renderCell:e=>(0,r.jsx)(d.A,{size:"small",value:f[e.id]||"",onChange:a=>v(e.id,a.target.value),sx:{width:"70px",height:"20px"}})},{field:"Precio_Neto",headerName:"NETO",width:80,valueFormatter:e=>{let a=parseFloat(e).toFixed(0);return"$".concat(parseFloat(a).toLocaleString())},headerClassName:"header-bold"},{field:"Disp",headerName:"DISP",width:80,headerClassName:"header-bold"}];return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(m.A,{container:!0,direction:"column",sx:{minHeight:"100vh",backfroundColor:"#ffffff",padding:2},children:[(0,r.jsx)(m.A,{size:12,children:(0,r.jsxs)(i.A,{sx:{display:"flex",flexDirection:b?"column":"row",alignItems:"center",gap:2,marginBottom:2},children:[(0,r.jsx)("h2",{children:(0,r.jsx)("strong",{children:"SELECCIONAR ARTICULO"})}),(0,r.jsxs)(i.A,{sx:{display:"flex",flexDirection:b?"column":"row",alignItems:"center",gap:2,marginLeft:b?0:"auto",width:b?"100%":"auto"},children:[(0,r.jsx)(l.A,{variant:"outlined",color:"success",sx:{margin:1},onClick:()=>{t(g.filter(e=>f[e.PKcodigo]).map(e=>({...e,cantped:f[e.PKcodigo]}))),a()},children:"Agregar"}),(0,r.jsx)(l.A,{variant:"contained",color:"error",onClick:a,children:"Cerrar"})]})]})}),(0,r.jsx)(s.A,{}),(0,r.jsx)(m.A,{size:12,sx:{padding:2},children:(0,r.jsx)(d.A,{id:"outlined-basic",label:"Digite Codigo o Referencia para Buscar",multiline:!0,rows:1,variant:"outlined",value:x,onChange:e=>{e.preventDefault(),p(e.target.value),j(e.target.value)},sx:{width:"100%"}})}),(0,r.jsx)(m.A,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,r.jsx)(i.A,{sx:{width:"100%",height:b?500:820},children:(0,r.jsx)(c.z,{density:"compact",rows:g,columns:A,getRowId:e=>e.PKcodigo,processRowUpdate:e=>{let a=g.map(a=>a.PKcodigo===e.PKcodigo?{...a,...e}:a);return u(a),N(a),e},initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20]})})})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[6121,9293,4269,6251,251,8441,1517,7358],()=>a(12852)),_N_E=e.O()}]);