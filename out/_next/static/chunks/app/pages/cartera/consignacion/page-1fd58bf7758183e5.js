(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5098],{24152:(e,a,s)=>{Promise.resolve().then(s.bind(s,87533))},87533:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>O});var i=s(95155),r=s(89142),l=s(23165),n=s(2572),t=s(19293),o=s(92608),d=s(2241),c=s(12406),h=s(78562),m=s(47335),x=s(27315),u=s(18786),A=s(2432),j=s(22282),N=s(24525),g=s(62783),C=s(51991),p=s(70689),f=s(30251),b=s(12115),w=s(48097),E=s(8889);let S=(0,r.Ay)(N.A)(e=>{let{theme:a}=e;return{["&.".concat(g.A.head)]:{backgroundColor:a.palette.common.black,color:a.palette.common.white},["&.".concat(g.A.body)]:{fontSize:14}}}),I=[{field:"ID",headerName:"ID CONSIGNACI\xd3N",width:150,headerClassName:"header-bold"},{field:"BankName",headerName:"BANCO",width:400,headerClassName:"header-bold"},{field:"ConsignmentNumber",headerName:"NUMERO DE CONSIGNACI\xd3N",width:250,headerClassName:"header-bold"},{field:"UserFullName",headerName:"ELABORADA POR",width:150,headerClassName:"header-bold"},{field:"Date",headerName:"FECHA",width:180,headerClassName:"header-bold"},{field:"Ammount",headerName:"TOTAL CONSIGNACI\xd3N",width:170,headerClassName:"header-bold"}],O=()=>{let{auth:e}=(0,p.A)(),[a,s]=(0,b.useState)([]),[r,g]=(0,b.useState)(!1),[O,k]=(0,b.useState)([]),[y,D]=(0,b.useState)(""),[z,v]=(0,b.useState)([]),[R,T]=(0,b.useState)([]),F=(0,l.A)("(max-width: 600px)"),B=async a=>{T(a),g(!0);try{let s=await fetch(E.m.url+"/receipts/consult/ConsignmentDetail?ID=".concat(e.IDSaler,"&data=").concat(a.ID),{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("Error en la solicitud: ".concat(s.status));let i=await s.json();k(i)}catch(e){console.log("Error al obtener los datos del recibo",e)}},G=()=>{T(null),g(!1)};(0,b.useEffect)(()=>{(async()=>{try{let a=await fetch(E.m.url+"/consignments/list",{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Error en la solicitud: ".concat(a.status));let i=(await a.json()).filter(a=>a.UserFullName===e.UserFullName);s(i),v(i)}catch(e){console.log("Error al adquirir los datos",e)}})()},[]);let L=e=>{s(z.filter(a=>Object.values(a).map(e=>e?e.toString().toLowerCase():"").some(a=>a.includes(e.toLowerCase()))))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.A,{}),(0,i.jsxs)(w.A,{container:!0,direction:"column",sx:{minHeight:"100vh",backfroundColor:"#ffffff",padding:2},children:[(0,i.jsx)(w.A,{size:12,children:(0,i.jsxs)(n.A,{sx:{display:"flex",flexDirection:F?"column":"row",alignItems:"center"},children:[(0,i.jsx)("h2",{children:(0,i.jsx)("strong",{children:"CONSIGNACIONES"})}),(0,i.jsx)(n.A,{sx:{display:"flex",flexDirection:F?"column":"row",alignItems:"center",marginLeft:F?0:"auto",padding:2},children:(0,i.jsx)(t.A,{id:"outlined-basic",label:"Buscar...",multiline:!0,rows:1,variant:"outlined",value:y,onChange:e=>{D(e.target.value),L(e.target.value)},sx:{width:F?300:400}})})]})}),(0,i.jsx)(w.A,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,i.jsx)(n.A,{sx:{width:"100%",height:F?500:755},children:(0,i.jsx)(f.z,{rows:a,columns:I,getRowId:e=>e.ID,initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20],onRowClick:e=>B(e.row)})})})]}),(0,i.jsx)(o.A,{open:r,onClose:G,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,i.jsxs)(n.A,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"850px",height:"90%",height:"50vh",overflowY:"auto",margin:"auto",mt:4,p:2},children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{children:"DETALLE DE CONSIGNACI\xd3N"}),(0,i.jsx)(d.A,{}),R&&(0,i.jsxs)(w.A,{container:!0,rowSpacing:1.5,columnSpacing:{xs:1,sm:2,md:3},sx:{p:1},children:[(0,i.jsxs)(w.A,{size:{xs:10,sm:8,md:6},children:[(0,i.jsx)("strong",{children:"Banco: "}),R.BankName]}),(0,i.jsxs)(w.A,{size:{xs:10,sm:8,md:6},children:[(0,i.jsx)("strong",{children:"Numero de Consignaci\xf3n: "}),R.ConsignmentNumber]}),(0,i.jsxs)(w.A,{size:{xs:8,sm:6,md:4},children:[(0,i.jsx)("strong",{children:"Fecha: "}),R.Date]}),(0,i.jsxs)(w.A,{size:{xs:8,sm:6,md:4},children:[(0,i.jsx)("strong",{children:"Elaborada Por: "}),R.UserFullName]}),(0,i.jsxs)(w.A,{size:{xs:8,sm:6,md:4},children:[(0,i.jsx)("strong",{children:"Total Consignaci\xf3n: "}),R.Ammount]})]}),R&&(0,i.jsx)(t.A,{id:"outlined-basic",multiline:!0,rows:2,defaultValue:R.Comentarios,variant:"outlined",label:"Comentarios",sx:{width:"100%",mb:2}})]}),(0,i.jsx)(c.A,{component:h.A,children:(0,i.jsxs)(m.A,{sx:{width:"100%",heigth:"auto"},size:"small","aria-label":"simple table",children:[(0,i.jsx)(x.A,{children:(0,i.jsxs)(u.A,{children:[(0,i.jsx)(S,{children:"N\xb0 Recibo"}),(0,i.jsx)(S,{children:"Nit"}),(0,i.jsx)(S,{children:"Raz\xf3n Social"}),(0,i.jsx)(S,{children:"Fecha Recibo"}),(0,i.jsx)(S,{children:"Valor Recibo"}),(0,i.jsx)(S,{children:"Registrado Por"}),(0,i.jsx)(S,{children:"Estado"})]})}),(0,i.jsx)(A.A,{children:Array.isArray(O)&&O.map(e=>(0,i.jsxs)(u.A,{children:[(0,i.jsx)(N.A,{children:e.CONSECUTIVO}),(0,i.jsx)(N.A,{children:e.NIT}),(0,i.jsx)(N.A,{children:e.RazonSocial}),(0,i.jsx)(N.A,{children:e.FECHA}),(0,i.jsx)(N.A,{children:e.TOTAL}),(0,i.jsx)(N.A,{children:e.U1}),(0,i.jsx)(N.A,{children:e.StateName})]},e.ID))})]})}),(0,i.jsx)(n.A,{sx:{display:"flex",justifyContent:"flex-end",margin:2},children:(0,i.jsx)(j.A,{variant:"contained",onClick:G,children:"Cerrar"})})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[8320,6121,9293,4269,6251,251,1647,2420,1991,8441,1517,7358],()=>a(24152)),_N_E=e.O()}]);