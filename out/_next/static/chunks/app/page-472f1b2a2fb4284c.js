(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{30352:(e,t,r)=>{Promise.resolve().then(r.bind(r,39319))},39319:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Copyright:()=>j,default:()=>b});var a=r(95155),o=r(24183),n=r(9561),s=r(23165),i=r(2572),l=r(20457),u=r(18813),c=r(79845),d=r(19293),h=r(22282),g=r(80906),m=r(70689),p=r(76046),x=r(10897),f=r(8889),S=r(12115),v=r(5565);let y=(0,o.A)({components:{MuiButton:{styleOverrides:{root:{borderRadius:"8px",backgroundColor:"#32DE0C","&:hover":{backgroundColor:"#0CDE1F"}}}},MuiButton:{styleOverrides:{root:{marginBottom:"1rem"}}}}}),C=S.forwardRef(function(e,t){return(0,a.jsx)(x.A,{elevation:6,ref:t,variant:"filled",...e})});function j(e){return(0,a.jsxs)(n.A,{variant:"body2",color:"text.secondary",align:"center",...e,children:["Departamento de Sistemas \xa9 ",new Date().getFullYear(),"."]})}let A=async(e,t)=>{let r=await fetch(f.m.url+"/users/username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserName:e,UserPass:t})});return r.ok?r.json():404===r.status?{error:{detail:"Credenciales incorrectas"}}:{error:{detail:"Error desconocido"}}},b=function(){let e=(0,p.useRouter)(),{login:t}=(0,m.A)(),[r,o]=(0,S.useState)(""),[x,f]=(0,S.useState)(!1),[j,b]=(0,S.useState)(!1),[k,O]=(0,S.useState)(!1),[w,N]=(0,S.useState)(""),E=(0,s.A)(y.breakpoints.down("sm")),I=async a=>{a.preventDefault();try{let a=await A(w,r);a.error?(O(!0),b(!0)):(f(!0),t(a),e.push("../pages"))}catch(e){O(!0),b(!0),console.log("Error en la pagina Iniciar Sesi\xf3n",e)}},F=e=>{"clicaway"!==e&&(f(!1),O(!1))};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(i.A,{sx:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#f5f5f5"},children:[(0,a.jsx)(l.Ay,{}),(0,a.jsx)(u.A,{theme:y,children:(0,a.jsxs)(c.A,{component:"main",maxWidth:"xs",sx:{backgroundColor:"#FFFFFF",padding:4,borderRadius:2,boxShadow:"0px 5px 15px rgba(0,0,0,0.3)",marginTop:6},children:[(0,a.jsx)(i.A,{sx:{textAlign:"center"},children:(0,a.jsx)(v.default,{src:"/LOGO.png",width:E?200:240,height:E?120:140,alt:"Logo",priority:!0})}),(0,a.jsx)(n.A,{component:"h1",variant:"h5",align:"center",sx:{fontWeight:"bold",marginBottom:2},children:"!Bienvenido\xa1"}),(0,a.jsxs)(i.A,{component:"form",noValidate:!0,onSubmit:I,sx:{mt:1},children:[(0,a.jsx)(d.A,{error:k,id:"usuario",label:"Usuario",margin:"normal",fullWidth:!0,name:"PER_Usuario",value:w,onChange:e=>N(e.target.value)}),(0,a.jsx)(n.A,{component:"h1",variant:"h6"}),(0,a.jsx)(d.A,{error:k,margin:"normal",required:!0,fullWidth:!0,type:"password",name:"PER_Clave",id:"contrase\xf1a",label:"Contrase\xf1a",value:r,onChange:e=>o(e.target.value)}),(0,a.jsx)(h.A,{type:"submit",fullWidth:!0,variant:"contained",color:"success",sx:{marginTop:2},children:"Iniciar sesi\xf3n"})]})]})}),x?(0,a.jsx)(g.A,{open:x,autoHideDuration:6e3,onClose:F,children:(0,a.jsx)(C,{onClose:F,variant:"outlined",severity:"success",sx:{width:"100%"},children:"Usuario identificado."})}):"",j?(0,a.jsx)(g.A,{open:j,autoHideDuration:6e3,onClose:F,children:(0,a.jsx)(C,{onClose:F,variant:"outlined",severity:"error",sx:{width:"100%"},children:"El usuario o la contrase\xf1a son incorrectos."})}):""]})})}},8889:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});let a={url:"http://192.168.1.3:3010/api"}},70689:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,default:()=>l});var a=r(95155),o=r(12115),n=r(76046),s=r(92054);let i=(0,o.createContext)({login:e=>{},logout:()=>{}}),l=e=>{let{children:t}=e,r=(0,n.useRouter)(),[l,u]=(0,o.useState)(null),[c,d]=(0,o.useState)({}),[h,g]=(0,o.useState)({}),[m,p]=(0,o.useState)({}),x=(0,o.useCallback)(function(e){document.cookie=(0,s.lK)("auth",JSON.stringify(e.signedUser),{maxAge:604800,path:"/",httpOnly:!1,secure:!1,sameSite:"Strict"}),localStorage.setItem("auth",JSON.stringify(e.signedUser)),localStorage.setItem("Tokens",JSON.stringify(e.token)),u(e.signedUser)},[]),f=(0,o.useCallback)(function(e){document.cookie=(0,s.lK)("auth","",{maxAge:-1,path:"/"}),localStorage.removeItem("auth"),localStorage.removeItem("Tokens"),r.push("/")},[]);(0,o.useEffect)(()=>{let e=localStorage.getItem("auth"),t=localStorage.getItem("clienteV"),r=localStorage.getItem("pedidoV"),a=localStorage.getItem("cartera");e&&u(JSON.parse(e)),t&&d(JSON.parse(t)),r&&g(JSON.parse(r)),a&&p(JSON.parse(a))},[]),(0,o.useEffect)(()=>{let e=(0,s.qg)(document.cookie||"");e.auth&&u(JSON.parse(e.auth))},[]);let S=(0,o.useMemo)(()=>({auth:l,login:x,logout:f,clienteV:c,setClienteV:d,pedidosV:h,setPedidosV:g,carteraV:m,setCarteraV:p}),[l,c,h,m,x,f]);return(0,a.jsx)(i.Provider,{value:S,children:t})},u=()=>(0,o.useContext)(i)}},e=>{var t=t=>e(e.s=t);e.O(0,[3509,4017,5565,3882,2405,8441,1517,7358],()=>t(30352)),_N_E=e.O()}]);