(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2456],{55803:function(e,i,o){Promise.resolve().then(o.bind(o,73761))},19492:function(e,i,o){"use strict";var s=o(59018),t=o(57437);i.Z=(0,s.Z)((0,t.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},10524:function(e,i,o){"use strict";var s=o(59018),t=o(57437);i.Z=(0,s.Z)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")},22051:function(e,i,o){"use strict";var s=o(59018),t=o(57437);i.Z=(0,s.Z)((0,t.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline")},87070:function(e,i,o){"use strict";var s=o(59018),t=o(57437);i.Z=(0,s.Z)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},80222:function(e,i,o){"use strict";var s=o(59018),t=o(57437);i.Z=(0,s.Z)((0,t.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V8l8 5 8-5zm-8-7L4 6h16z"}),"MailOutline")},17030:function(e,i,o){"use strict";var s=o(59018),t=o(57437);i.Z=(0,s.Z)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16"}),"MonetizationOn")},73761:function(e,i,o){"use strict";o.r(i),o.d(i,{default:function(){return M}});var s=o(57437),t=o(48024),r=o(79647),a=o(17156),n=o(61169),l=o(48965),c=o(60335),d=o(37241),h=o(14595),x=o(92674),m=o(28027),u=o(86645),j=o(74691),p=o(87116),f=o(68884),Z=o(76548),C=o(83719),g=o(22051),b=o(48367),S=o(58292),w=o(17030),z=o(80222),N=o(10524),E=o(19492),v=(0,o(59018).Z)([(0,s.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,s.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn"),y=o(47703),k=o(87070),R=o(85800),T=o(86934),I=o(64379),O=o.n(I),P=o(89967),F=o(80219),V=o(2265),D=o(22960);let L=(0,t.ZP)(b.Z)(e=>{let{theme:i}=e;return{["&.".concat(S.Z.head)]:{backgroundColor:i.palette.common.black,color:i.palette.common.white},["&.".concat(S.Z.body)]:{fontSize:14}}}),A=[{field:"CONSECUTIVO",headerName:"Recibo",width:100},{field:"NIT",headerName:"Nit",width:140},{field:"RazonSocial",headerName:"Razon Social",width:390},{field:"FECHA",headerName:"Fecha Recibo",width:170},{field:"TOTAL",headerName:"Total Recibo",width:100},{field:"StateName",headerName:"Estado",width:100},{field:"IsConsigned",headerName:"Consignado",width:90},{field:"U3",headerName:"Consignado Por",width:120},{field:"HasChecks",headerName:"Cheques",width:100}],H=[{label:"Fecha"},{label:"NIT"},{label:"Numero de recibo"},{label:"Raz\xf3n Social"},{label:"Documento"},{label:"Todos"}];var M=()=>{let{auth:e}=(0,R.a)(),[i,o]=(0,V.useState)(null),[t,S]=(0,V.useState)(!1),[I,M]=(0,V.useState)([]),[U,B]=(0,V.useState)(!1),[G,_]=(0,V.useState)(!1),[q,W]=(0,V.useState)(""),[Y,J]=(0,V.useState)([]),[Q,K]=(0,V.useState)([]),[X,$]=(0,V.useState)(""),[ee,ei]=(0,V.useState)(""),[eo,es]=(0,V.useState)(null),[et,er]=(0,V.useState)(""),[ea,en]=(0,V.useState)(null),[el,ec]=(0,V.useState)(null==ea?void 0:ea.ReciboFisico),ed=(0,D.Z)(),eh=(0,r.Z)(ed.breakpoints.down("sm")),ex=async e=>{en(e),es(e.CONSECUTIVO),o(e.NIT),ec(e.ReciboFisico),S(!0);try{let i=await fetch(P.x.url+"/receipts/receiptdetail/".concat(e.CONSECUTIVO,"?action=Consult"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw Error("Error en la solicitud: ".concat(i.status));let o=await i.json();K(o.receipts)}catch(e){console.log("Error al obtener los datos del recibo",e)}if("Si"===e.HasChecks)try{let i=await fetch(P.x.url+"/receipts/receiptdetail/".concat(e.CONSECUTIVO,"?ProfileName=Administrador&action=Gettle&checks=Si"),{method:"GET",headers:{"Content-Type":"application/json"}}),o=await i.json();J(o.checks),console.log(o.checks)}catch(e){console.log("Error al obtener los datos del cheque",e)}else J([])},em=()=>{en(null),S(!1)},eu=()=>{_(!1)};(0,V.useEffect)(()=>{ej()},[q,et]);let ej=async()=>{try{let i;"Fecha"===q&&ee&&X?i=await fetch(P.x.url+"/receipts/consult/Fecha?&ProfileName=Vendedor&ID=".concat(e.ID,"&data=").concat(ee,"|").concat(X),{metho:"GET",headers:{"Content-Type":"application/json"}}):q&&et?i=await fetch(P.x.url+"/receipts/consult/".concat(q,"?&ID=").concat(e.ID,"&data=").concat(et,"&ProfileName=Vendedor"),{method:"GET",headers:{"Content-Type":"application/json"}}):"Todos"===q&&(i=await fetch(P.x.url+"/receipts/consult/Todos?&ID=".concat(e.ID,"&ProfileName=Vendedor"),{method:"GET",headers:{"Content-Type":"application/json"}}));let o=await i.json();M(o)}catch(e){console.error("Error al realizar la b\xfasqueda",e)}},ep=async()=>{if(!eo||!i){O().fire({icon:"warning",title:"Datos Faltantes",text:"Por favor, asegurate de que el N\xfamero del Recibo y el Nit est\xe9n definidos."});return}try{let e=await fetch(P.x.url+"/receipts/sendmail/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({consecutivo:eo,nit:i})});if(e.ok){let i=await e.json();em(),O().fire({position:"top-end",icon:"success",title:"Email Enviado con Exito!.",text:"".concat(i.text),showConfirmButton:!1,timer:2500})}else O().fire({icon:"error",title:"Oops...",text:"Error al Enviar el Email!."})}catch(e){O().fire({icon:"error",title:"Error de Red",text:"No se pudo Enviar el Correo debido a un Problema de Red."})}},ef=()=>{B(!1)},eZ=async()=>{if(!el){O().fire({icon:"warning",title:"Falta El N\xfamero de Recibo",text:"Por favor, Ingresa el Nuevo N\xfamero de Recibo"});return}let e={NumeroRecibo:ea.ReciboFisico,NuevoRecibo:el};console.log(e);try{let i=await fetch(P.x.url+"/receipts/edit/".concat(eo),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await i.json();if(ef(),o)O().fire({icon:"success",title:"N\xfamero Actualizado",text:"El N\xfamero de Recibo fue Actualizado Correctamente."});else throw Error("Failed to update")}catch(e){console.error("Error al actualizar el n\xfamero:",e),O().fire({icon:"error",title:"Error de Actualizaci\xf3n",text:"No se pudo actualizar el n\xfamero de recibo."})}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Z,{}),(0,s.jsxs)(F.Z,{container:!0,direction:"column",sx:{minHeight:"100vh",backfroundColor:"#ffffff",padding:2},children:[(0,s.jsx)(F.Z,{size:12,children:(0,s.jsxs)(a.Z,{sx:{display:"flex",flexDirection:eh?"column":"row",alignItems:"center",gap:2,marginBottom:2},children:[(0,s.jsx)("h2",{children:(0,s.jsx)("strong",{children:"CONSULTAR RECIBO"})}),(0,s.jsxs)(a.Z,{sx:{display:"flex",flexDirection:eh?"column":"row",alignItems:"center",gap:2,marginLeft:eh?0:"auto",width:eh?"100%":"auto"},children:[(0,s.jsx)("strong",{children:"Consulta Por: "}),(0,s.jsx)(n.Z,{id:"size-small-outlined",size:"small",sx:{width:200},disablePortal:!0,options:H,onChange:(e,i)=>W((null==i?void 0:i.label)||""),renderInput:e=>(0,s.jsx)(l.Z,{...e,label:"Seleccione el Criterio"})}),"Fecha"!==q?(0,s.jsx)(l.Z,{id:"outlined-basic",label:"Buscar...",size:"small",multiline:!0,variant:"outlined",value:et,onChange:e=>er(e.target.value),sx:{width:200}}):(0,s.jsxs)(a.Z,{sx:{display:"flex",flexDirection:eh?"column":"row",gap:2},children:[(0,s.jsx)(l.Z,{label:"Inicio",type:"date",value:ee,onChange:e=>ei(e.target.value),size:"small",InputLabelProps:{shrink:!0}}),(0,s.jsx)(l.Z,{label:"Fin",type:"date",value:X,onChange:e=>$(e.target.value),size:"small",InputLabelProps:{shrink:!0}})]}),(0,s.jsx)(c.Z,{onClick:ej,children:(0,s.jsx)(v,{sx:{fontSize:45},color:"success"})})]})]})}),(0,s.jsx)(F.Z,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,s.jsx)(a.Z,{sx:{width:"100%",height:eh?500:650},children:(0,s.jsx)(T._,{rows:I,columns:A,getRowId:e=>e.ID,pageSizeOptions:[10],onRowClick:e=>ex(e.row),initialState:{pagination:{paginationModel:{pageSize:10}}}})})})]}),(0,s.jsx)(d.Z,{open:t,onClose:em,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,s.jsxs)(a.Z,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"850px",width:"90%",height:"90vh",overflowY:"auto",margin:"auto",mt:4,p:2},children:[(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("strong",{children:"DETALLE DE RECIBO"}),(0,s.jsx)(h.Z,{}),ea&&(0,s.jsxs)(F.Z,{container:!0,rowSpacing:1.5,columnSpacing:{xs:1,sm:2,md:3},sx:{p:1},children:[(0,s.jsxs)(F.Z,{size:{xs:9,sm:6,md:3},children:[(0,s.jsx)("strong",{children:"Recibo: "}),ea.CONSECUTIVO]}),(0,s.jsxs)(F.Z,{size:{xs:12,sm:8,md:4},children:[(0,s.jsx)("strong",{children:"Fecha: "}),ea.FECHA]}),(0,s.jsxs)(F.Z,{size:{xs:12,sm:8,md:4},children:[(0,s.jsx)("strong",{children:"Nit: "}),ea.NIT]}),(0,s.jsxs)(F.Z,{size:{xs:27,sm:18,md:9},children:[(0,s.jsx)("strong",{children:"Raz\xf3n Social: "}),ea.RazonSocial]}),(0,s.jsxs)(F.Z,{size:{xs:18,sm:12,md:6},children:[(0,s.jsx)("strong",{children:"Registrado Por: "}),ea.U1]}),(0,s.jsxs)(F.Z,{size:{xs:18,sm:12,md:6},children:[(0,s.jsx)("strong",{children:"Asentado Por: "}),ea.U2]}),(0,s.jsxs)(F.Z,{size:{xs:12,sm:8,md:4},children:[(0,s.jsx)("strong",{children:"Estado: "}),ea.StateName]}),(0,s.jsxs)(F.Z,{size:{xs:12,sm:8,md:4},children:[(0,s.jsx)("strong",{children:"Recibo Fisico: "}),ea.ReciboFisico]}),(0,s.jsxs)(F.Z,{size:{xs:12,sm:8,md:4},children:[(0,s.jsx)("strong",{children:"Recibo SoftLand: "}),ea.ReciboSoftland]})]}),ea&&(0,s.jsx)(l.Z,{id:"outlined-basic",multiline:!0,size:"small",defaultValue:ea.Comentarios,variant:"outlined",label:"Comentarios",sx:{width:"100%",mb:2}})]}),(0,s.jsx)(x.Z,{component:m.Z,children:(0,s.jsxs)(u.Z,{sx:{width:"100%",maxHeight:"6ovh",overflowY:"auto"},size:"small","aria-label":"simple table",children:[(0,s.jsx)(j.Z,{children:(0,s.jsxs)(p.Z,{children:[(0,s.jsx)(L,{children:"Documento"}),(0,s.jsx)(L,{children:"Valor Cancelado"})]})}),(0,s.jsxs)(f.Z,{children:[Array.isArray(Q)&&Q.map(e=>(0,s.jsxs)(p.Z,{children:[(0,s.jsx)(b.Z,{children:e.NumeroDocumento}),(0,s.jsx)(b.Z,{children:e.ValorCancelado})]},e.NumeroDocumento)),(0,s.jsxs)(p.Z,{children:[(0,s.jsx)(b.Z,{align:"right",children:(0,s.jsx)("strong",{children:"TOTAL"})}),(0,s.jsx)(b.Z,{align:"right",children:(0,s.jsx)("strong",{children:null==ea?void 0:ea.TOTAL})})]})]})]})}),(0,s.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(null==ea?void 0:ea.HasChecks)==="Si"&&(0,s.jsx)(c.Z,{onClick:()=>{_(!0)},title:"Ver Cheques",children:(0,s.jsx)(w.Z,{sx:{fontSize:40,color:"#f31919"}})}),(0,s.jsx)(c.Z,{onClick:ep,title:"Reenviar Por Correo",children:(0,s.jsx)(z.Z,{sx:{fontSize:40},color:"primary"})}),(0,s.jsx)(c.Z,{onClick:()=>{B(!0)},title:"Editar Recibo",children:(0,s.jsx)(k.Z,{sx:{fontSize:40},color:"secondary"})}),(0,s.jsx)(c.Z,{onClick:em,title:"Salir",children:(0,s.jsx)(g.Z,{sx:{fontSize:40},color:"success"})})]})]})}),(0,s.jsx)(d.Z,{open:G,onClose:eu,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,s.jsx)(a.Z,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"650px",width:"90%",height:"32vh",overflowY:"auto",margin:"auto",mt:4,p:2},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("strong",{children:"RELACI\xd3N DE CHEQUES"}),(0,s.jsx)(h.Z,{}),Array.isArray(Y)&&Y.map((e,i)=>(0,s.jsxs)(F.Z,{container:!0,rowSpacing:1.5,columnSpacing:{xs:1,sm:2,md:3},sx:{p:1},children:[(0,s.jsxs)(F.Z,{size:{xs:18,sm:12,md:6},children:[(0,s.jsx)("strong",{children:"Banco: "}),e.bank]}),(0,s.jsxs)(F.Z,{size:{xs:18,sm:12,md:6},children:[(0,s.jsx)("strong",{children:"N\xfamero de Cheque: "}),e.checkNumber]}),(0,s.jsxs)(F.Z,{size:{xs:18,sm:12,md:6},children:[(0,s.jsx)("strong",{children:"Fecha: "}),e.checkDate]}),(0,s.jsxs)(F.Z,{size:{xs:18,sm:12,md:6},children:[(0,s.jsx)("strong",{children:"Valor: "}),e.value]})]},i)),(0,s.jsx)(h.Z,{}),(0,s.jsx)(a.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,s.jsx)(Z.Z,{onClick:eu,color:"success",children:"Cerrar"})})]})})}),(0,s.jsx)(d.Z,{open:U,onClose:ef,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,s.jsxs)(a.Z,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"500px",margin:"auto",mt:4},children:[(0,s.jsx)("strong",{children:"Editar Recibo Fisico"}),(0,s.jsx)(h.Z,{}),(0,s.jsx)(C.Z,{children:"N\xfamero de Recibo: "}),(0,s.jsx)(l.Z,{variant:"outlined",fullWidth:!0,margin:"normal",value:el,onChange:e=>ec(e.target.value)}),(0,s.jsx)(h.Z,{}),(0,s.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[(0,s.jsx)(c.Z,{color:"success",onClick:eZ,children:(0,s.jsx)(N.Z,{sx:{fontSize:40}})}),(0,s.jsx)(c.Z,{color:"error",onClick:ef,children:(0,s.jsx)(E.Z,{sx:{fontSize:40}})})]})]})})]})}}},function(e){e.O(0,[9461,4759,1513,1929,5202,6934,2398,6920,7703,2971,7023,1744],function(){return e(e.s=55803)}),_N_E=e.O()}]);