(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7563],{48771:function(e,t,n){Promise.resolve().then(n.bind(n,53310))},53310:function(e,t,n){"use strict";n.r(t);var s=n(57437),r=n(70899),i=n(2069),o=n(8350),a=n(77584),l=n(42187),c=n(85860),d=n(22560),x=n(94013),u=n(69250),h=n(20816),m=n(5100),j=n(3989),f=n(5256),p=n(98730),g=n(10932),Z=n(99376),C=n(29239),w=n(41698),b=n(2265),v=n(5515),y=n.n(v),N=n(71096),S=n.n(N);t.default=()=>{let e=(0,Z.useRouter)(),{clienteV:t,auth:n}=(0,g.a)(),[v,N]=(0,b.useState)(null),[k,D]=(0,b.useState)(null),[T,E]=(0,b.useState)(!1),[I,z]=(0,b.useState)(""),[_,O]=(0,b.useState)(!1),[R,F]=(0,b.useState)(""),P=(0,r.Z)("(max-width: 600px)"),A=_?"Si":"No",U=T?"Si":"No",W=async()=>{let s={Tipo:I,Comentario:R,Agenda:k?k.format("YYYY/MM/DD"):"0-0-0",FKNitCliente:t.NIT||"",FKUsuario:n.UserFullName||"USUARIOS",Hora:v?v.format("HH:mm:ss"):null,Realiza_pedido:A,Zona:t.CityName,Cobro:U,CODVENDEDOR:n.IDSaler};console.log("Datos enviados al bakend",s);try{let t=await fetch(w.x.url+"/gestioncartera/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),n=await t.json();t.ok?(y().fire({position:"top-end",icon:"success",title:"Rutero Creado Correctamente",showConfirmButton:!1,timer:2500}),e.push("../gestionCartera")):(console.error("Response not ok",n),y().fire({icon:"error",title:"Error",text:n.text||"No se pudo guardar el rutero. Intente de nuevo."}))}catch(e){"AbortError"===e.name?y().fire({icon:"error",title:"Error",text:"La solicitud est\xe1 tardando demasiado. Intente nuevamente m\xe1s tarde."}):(console.error("Error details:",e),y().fire({icon:"error",title:"Error",text:"Ocurri\xf3 un error en la conexi\xf3n. Intente de nuevo."}))}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{}),(0,s.jsxs)(i.Z,{sx:{width:P?"90%":600,margin:"0 auto",padding:2,border:"2px solid #000",p:2,mt:4},children:[(0,s.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:P?"center":"flex-start"},children:[(0,s.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[(0,s.jsx)("strong",{children:"Nit: "}),t.NIT]}),(0,s.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[(0,s.jsx)("strong",{children:"Raz\xf3n Social: "}),t.RazonSocial]}),(0,s.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[(0,s.jsx)("strong",{children:"Usuario: "}),null==n?void 0:n.UserFullName]})]}),(0,s.jsx)(o.Z,{sx:{my:2}}),(0,s.jsxs)(i.Z,{sx:{maxWidth:650,margin:"0 auto",padding:2},children:[(0,s.jsxs)(C.Z,{container:!0,spacing:2,alignItems:"center",children:[(0,s.jsx)(C.Z,{size:{xs:12,sm:6},children:(0,s.jsx)(u._,{dateAdapter:j.y,children:(0,s.jsx)(m.C,{components:["TimePicker"],children:(0,s.jsx)(f.j,{label:"Hora",fullWidth:!0,value:v,onChange:e=>N(e),minTime:S()().hour(7).minute(0),maxTime:S()().hour(20).minute(0),slotProps:{textField:{variant:"outlined",fullWidth:!0}}})})})}),(0,s.jsx)(C.Z,{size:{xs:12,sm:6},children:(0,s.jsxs)(a.Z,{label:"Tipo de Gesti\xf3n",select:!0,fullWidth:!0,value:I,onChange:e=>z(e.target.value),sx:{width:250,margin:1},children:[(0,s.jsx)(l.Z,{value:"Telefonica",children:"Telef\xf3nica"}),(0,s.jsx)(l.Z,{value:"Presencial",children:"Presencial"})]})})]}),(0,s.jsxs)(C.Z,{container:!0,spacing:2,alignItems:"center",sx:{mt:2},children:[(0,s.jsx)(C.Z,{size:{xs:6,sm:3},children:(0,s.jsx)(c.Z,{control:(0,s.jsx)(d.Z,{checked:_,onChange:e=>O(e.target.checked)}),label:"\xbfHizo pedido?"})}),(0,s.jsx)(C.Z,{size:{xs:6,sm:3},children:(0,s.jsx)(c.Z,{control:(0,s.jsx)(d.Z,{checked:T,onChange:e=>E(e.target.checked)}),label:"\xbfCobr\xf3?"})}),(0,s.jsx)(C.Z,{size:{xs:12,sm:6},children:(0,s.jsx)(u._,{dateAdapter:j.y,children:(0,s.jsx)(h.M,{label:"Agendar",value:k,onChange:e=>D(e),slotProps:{textField:{variant:"outlined",fullWidth:!0}}})})})]}),(0,s.jsx)(a.Z,{label:"Comentarios",multiline:!0,rows:3,fullWidth:!0,value:R,onChange:e=>F(e.target.value),sx:{mt:2}}),(0,s.jsx)(x.Z,{variant:"contained",color:"success",onClick:W,sx:{mt:2,width:"100%"},children:"Guardar"})]})]})]})}}},function(e){e.O(0,[9461,173,7584,5615,1238,3683,8209,8730,2971,2117,1744],function(){return e(e.s=48771)}),_N_E=e.O()}]);