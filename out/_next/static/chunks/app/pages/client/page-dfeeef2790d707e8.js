(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{61999:(e,s,r)=>{Promise.resolve().then(r.bind(r,84866))},92080:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var o=r(12983),i=r(95155);let t=(0,o.A)((0,i.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")},52035:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var o=r(12983),i=r(95155);let t=(0,o.A)((0,i.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},7495:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var o=r(12983),i=r(95155);let t=(0,o.A)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")},6327:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var o=r(12983),i=r(95155);let t=(0,o.A)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},1535:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var o=r(12983),i=r(95155);let t=(0,o.A)((0,i.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email")},86802:(e,s,r)=>{"use strict";r.d(s,{A:()=>v});var o=r(12115),i=r(43463),t=r(62181),l=r(37157),a=r(7123),n=r(82637),d=r(25273),c=r(8383),x=r(91814),h=r(29214),m=r(86217),u=r(95155);let p=(0,x.A)(),j=(0,n.A)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,s)=>s.root});function A(e){return(0,d.A)({props:e,name:"MuiStack",defaultTheme:p})}let f=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],g=({ownerState:e,theme:s})=>{let r={display:"flex",flexDirection:"column",...(0,h.NI)({theme:s},(0,h.kW)({values:e.direction,breakpoints:s.breakpoints.values}),e=>({flexDirection:e}))};if(e.spacing){let o=(0,m.LX)(s),i=Object.keys(s.breakpoints.values).reduce((s,r)=>(("object"==typeof e.spacing&&null!=e.spacing[r]||"object"==typeof e.direction&&null!=e.direction[r])&&(s[r]=!0),s),{}),l=(0,h.kW)({values:e.direction,base:i}),a=(0,h.kW)({values:e.spacing,base:i});"object"==typeof l&&Object.keys(l).forEach((e,s,r)=>{if(!l[e]){let o=s>0?l[r[s-1]]:"column";l[e]=o}}),r=(0,t.A)(r,(0,h.NI)({theme:s},a,(s,r)=>e.useFlexGap?{gap:(0,m._W)(o,s)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${f(r?l[r]:e.direction)}`]:(0,m._W)(o,s)}}))}return(0,h.iZ)(s.breakpoints,r)};var C=r(89142),b=r(49757);let v=function(e={}){let{createStyledComponent:s=j,useThemeProps:r=A,componentName:t="MuiStack"}=e,n=()=>(0,a.A)({root:["root"]},e=>(0,l.Ay)(t,e),{}),d=s(g);return o.forwardRef(function(e,s){let t=r(e),{component:l="div",direction:a="column",spacing:x=0,divider:h,children:m,className:p,useFlexGap:j=!1,...A}=(0,c.A)(t),f=n();return(0,u.jsx)(d,{as:l,ownerState:{direction:a,spacing:x,useFlexGap:j},ref:s,className:(0,i.A)(f.root,p),...A,children:h?function(e,s){let r=o.Children.toArray(e).filter(Boolean);return r.reduce((e,i,t)=>(e.push(i),t<r.length-1&&e.push(o.cloneElement(s,{key:`separator-${t}`})),e),[])}(m,h):m})})}({createStyledComponent:(0,C.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,s)=>s.root}),useThemeProps:e=>(0,b.A)({props:e,name:"MuiStack"})})},84866:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>D});var o=r(95155),i=r(23165),t=r(2572),l=r(19293),a=r(92608),n=r(2241),d=r(9561),c=r(86802),x=r(22282),h=r(894),m=r(84920),u=r(9581),p=r(7495),j=r(92080),A=r(48123),f=r(52035),g=r(6327),C=r(1535),b=r(6283),v=r(51991),y=r(70689),w=r(30251),z=r(12115),k=r(48097),N=r(8889),E=r(78897),S=r.n(E),R=r(67396);let I=[{field:"NIT",headerName:"NIT",width:150,headerClassName:"header-bold"},{field:"RazonSocial",headerName:"NOMBRE",width:400,headerClassName:"header-bold"},{field:"Direccion",headerName:"DIRECCI\xd3N",width:200,headerClassName:"header-bold"},{field:"Telefono",headerName:"TELEFONO",width:150,headerClassName:"header-bold"},{field:"PER_Nom",headerName:"VENDEDOR",width:150,headerClassName:"header-bold"},{field:"TotalCartera",headerName:"CARTERA",width:150,align:"right",headerClassName:"header-bold"}],D=()=>{let{auth:e,setClienteV:s}=(0,y.A)(),[r,E]=(0,z.useState)(!1),[D,T]=(0,z.useState)(!1),[L,O]=(0,z.useState)([]),[M,B]=(0,z.useState)(""),[P,_]=(0,z.useState)([]),[W,V]=(0,z.useState)(null),[F,H]=(0,z.useState)(W?W.Email:""),G=(0,i.A)("(max-width: 600px)"),X=e=>{V(e),H(e.Email),s(e),E(!0)},Y=()=>{E(!1),V(null)},$=()=>{T(!1)};(0,z.useEffect)(()=>{(async()=>{try{let s=await (0,b.Xv)(),r=await s.getAll("customers");if(r.length>0)O(r),_(r),console.log("Datos cargados desde IndexedDB");else{let r=await fetch(N.m.url+"/customers/Customers"),o=(await r.json()).filter(s=>s.IDVendedor===e.IDSaler);for(let e of(O(o),_(o),o))await s.add("customers",e);console.log("Datos guardados/actualizados en IndexedDB")}}catch(e){console.log("Error al obtener los datos:",e)}})()},[]);let J=e=>{O(P.filter(s=>Object.values(s).map(e=>e?e.toString().toLowerCase():"").some(s=>s.includes(e.toLowerCase()))))},Z=async()=>{let e={Nit:W.NIT,Email:F};console.log("Enviando correo actualizado: ",e);try{let s=await fetch(N.m.url+"/customers/updatemail_temp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok){$(),Y();let e=await s.json();S().fire({position:"top-end",icon:"success",title:"Email Actualizado con Exito!.",showConfirmButton:!1,timer:2500}),console.log(e)}else S().fire({icon:"error",title:"Oops...!",text:"Error al Actualizar el Email."})}catch(e){console.error("Error al actualizar el correo:",e),S().fire({icon:"error",title:"Error en la Red",text:"No se pudo Actualizar el Correo debido a un Problema de Red."})}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v.A,{}),(0,o.jsxs)(k.A,{container:!0,direction:"column",sx:{minHeight:"100vh",backfroundColor:"#ffffff",padding:2},children:[(0,o.jsx)(k.A,{size:12,children:(0,o.jsxs)(t.A,{sx:{display:"flex",flexDirection:G?"column":"row",alignItems:"center"},children:[(0,o.jsx)("h2",{children:(0,o.jsx)("strong",{children:"LISTADO DE CLIENTES"})}),(0,o.jsx)(t.A,{sx:{display:"flex",flexDirection:G?"column":"row",alignItems:"center",marginLeft:G?0:"auto",padding:2},children:(0,o.jsx)(l.A,{id:"outlined-basic",value:M,onChange:e=>{B(e.target.value),J(e.target.value)},placeholder:"Buscar...",sx:{width:G?300:400}})})]})}),(0,o.jsx)(k.A,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,o.jsx)(t.A,{sx:{width:"100%",height:G?500:660},children:(0,o.jsx)(w.z,{rows:L,columns:I,getRowId:e=>e.NIT,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[10],onRowClick:e=>X(e.row)})})})]}),(0,o.jsx)(a.A,{open:r,onClose:Y,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,o.jsxs)(t.A,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"750px",width:"90%",height:"70vh",overflowY:"auto",margin:"auto",mt:4,p:2},children:[W&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h3",{children:(0,o.jsx)("strong",{style:{fontSize:20,color:"#1be0e7"},children:W.RazonSocial})}),(0,o.jsx)(n.A,{}),(0,o.jsxs)(k.A,{container:!0,rowSpacing:1.5,columnSpacing:{xs:1,sm:2,md:3},sx:{p:1},children:[(0,o.jsxs)(k.A,{size:{xs:9,sm:6,md:3},children:[(0,o.jsx)("strong",{children:"NIT"}),(0,o.jsx)(d.A,{sx:{mb:1.5,display:"flex"},children:W.NIT})]}),(0,o.jsxs)(k.A,{size:{xs:9,sm:6,md:3},children:[(0,o.jsx)("strong",{children:"Cupo"}),(0,o.jsx)(d.A,{sx:{mb:1.5,display:"flex"},children:W.CupoCreditoCliente})]}),(0,o.jsxs)(k.A,{size:{xs:9,sm:6,md:3},children:[(0,o.jsx)("strong",{children:"Debe"}),(0,o.jsx)(d.A,{sx:{mb:1.5,display:"flex",color:"#f01212"},children:W.TotalCartera})]}),(0,o.jsxs)(k.A,{size:{xs:9,sm:6,md:3},children:[(0,o.jsx)("strong",{children:"Tel\xe9fono"}),(0,o.jsx)(d.A,{sx:{mb:1.5,display:"flex"},children:W.Telefono})]}),(0,o.jsxs)(k.A,{size:{xs:9,sm:6,md:3},children:[(0,o.jsx)("strong",{children:"Celular"}),(0,o.jsx)(d.A,{sx:{mb:1.5,display:"flex"},children:W.Celular})]}),(0,o.jsxs)(k.A,{size:{xs:9,sm:6,md:3},children:[(0,o.jsx)("strong",{children:"Fax"}),(0,o.jsx)(d.A,{sx:{mb:1.5,display:"flex"},children:W.Fax})]}),(0,o.jsxs)(k.A,{size:{xs:9,sm:6,md:3},children:[(0,o.jsx)("strong",{children:"Direcci\xf3n"}),(0,o.jsx)(d.A,{sx:{mb:1.5,display:"flex"},children:W.Direccion})]}),(0,o.jsxs)(k.A,{size:{xs:9,sm:6,md:3},children:[(0,o.jsx)("strong",{children:"Ciudad"}),(0,o.jsx)(d.A,{sx:{mb:1.5,display:"flex"},children:W.CityName})]}),(0,o.jsxs)(k.A,{size:{xs:9,sm:6,md:3},children:[(0,o.jsx)("strong",{children:"Departamento"}),(0,o.jsx)(d.A,{sx:{mb:1.5,display:"flex"},children:W.DepartmentName})]}),(0,o.jsxs)(k.A,{size:{xs:18,sm:12,md:6},children:[(0,o.jsx)("strong",{children:"Email"}),(0,o.jsx)(d.A,{sx:{mb:1.5,display:"flex"},children:W.Email})]})]}),(0,o.jsx)(l.A,{id:"outlined-basic",multiline:!0,rows:3,defaultValue:W.Comentarios,variant:"outlined",sx:{width:"100%",border:"2px solid #1be0e7"}})]}),(0,o.jsx)(n.A,{sx:{margin:2}}),(0,o.jsxs)(c.A,{direction:"row",spacing:2,sx:{flexWrap:"wrap",justifyContent:"center",p:2},children:[(0,o.jsx)(x.A,{variant:"outlined",startIcon:(0,o.jsx)(j.A,{}),sx:{color:"#29e5ad",margin:"2px"},LinkComponent:R.default,href:"./client/pedidos",children:"Pedidos"}),(0,o.jsx)(x.A,{variant:"outlined",startIcon:(0,o.jsx)(m.A,{}),sx:{color:"#e52990",margin:"2px"},LinkComponent:R.default,href:"./client/rutero",children:"Realizar Rutero"}),(0,o.jsx)(x.A,{variant:"outlined",startIcon:(0,o.jsx)(C.A,{}),color:"success",onClick:()=>{T(!0)},children:"Actualizar Correo"}),(0,o.jsx)(x.A,{variant:"outlined",startIcon:(0,o.jsx)(A.A,{}),color:"secondary",LinkComponent:R.default,href:"./client/recibo",children:"Ver Recibos"}),(0,o.jsx)(x.A,{variant:"outlined",startIcon:(0,o.jsx)(u.A,{}),sx:{color:"#2948e5",margin:"2px"},LinkComponent:R.default,href:"./client/crearRecibo",children:"Realizar Recibo"}),(0,o.jsx)(x.A,{variant:"contained",startIcon:(0,o.jsx)(g.A,{}),color:"error",onClick:Y,children:"Cerrar"})]})]})}),(0,o.jsx)(a.A,{open:D,onClose:$,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,o.jsxs)(t.A,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"600px",width:"90%",height:"40vh",overflowY:"auto",margin:"auto",mt:4},children:[(0,o.jsx)("strong",{children:"Actualizar Correo Electr\xf3nico"}),(0,o.jsx)(n.A,{}),(0,o.jsx)("h3",{style:{p:2,color:"#9f72f3"},children:W&&W.RazonSocial}),(0,o.jsx)(n.A,{}),(0,o.jsx)("strong",{children:"EMAIL: "}),(0,o.jsx)(l.A,{label:"Correo Electr\xf3nico",variant:"outlined",fullWidth:!0,margin:"normal",value:null!=F?F:"",onChange:e=>H(e.target.value)}),(0,o.jsx)(n.A,{}),(0,o.jsxs)(t.A,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[(0,o.jsx)(h.A,{color:"success",onClick:Z,children:(0,o.jsx)(p.A,{sx:{fontSize:40}})}),(0,o.jsx)(h.A,{color:"error",onClick:$,children:(0,o.jsx)(f.A,{sx:{fontSize:40}})})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8320,6121,9293,4269,6251,251,1647,1991,8441,1517,7358],()=>s(61999)),_N_E=e.O()}]);