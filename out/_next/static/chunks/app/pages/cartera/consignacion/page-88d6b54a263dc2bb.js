(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7930],{78073:function(e,a,s){Promise.resolve().then(s.bind(s,59122))},59122:function(e,a,s){"use strict";s.r(a);var n=s(57437),i=s(48024),r=s(79647),l=s(17156),o=s(48965),t=s(37241),d=s(14595),c=s(92674),h=s(28027),m=s(86645),x=s(74691),u=s(87116),j=s(68884),g=s(76548),f=s(48367),p=s(58292),C=s(47703),Z=s(85800),b=s(86934),N=s(2265),w=s(80219),E=s(89967);let S=(0,i.ZP)(f.Z)(e=>{let{theme:a}=e;return{["&.".concat(p.Z.head)]:{backgroundColor:a.palette.common.black,color:a.palette.common.white},["&.".concat(p.Z.body)]:{fontSize:14}}}),k=[{field:"ID",headerName:"Id Consiganci\xf3n",width:150,headerClassName:"header-bold"},{field:"BankName",headerName:"Banco",width:400,headerClassName:"header-bold"},{field:"ConsignmentNumber",headerName:"Numero de Consignaci\xf3n",width:250,headerClassName:"header-bold"},{field:"UserFullName",headerName:"Elaborada Por",width:150,headerClassName:"header-bold"},{field:"Date",headerName:"Fecha",width:180,headerClassName:"header-bold"},{field:"Ammount",headerName:"Total Consignaci\xf3n",width:170,headerClassName:"header-bold"}];a.default=()=>{let{auth:e}=(0,Z.a)(),[a,s]=(0,N.useState)([]),[i,p]=(0,N.useState)(!1),[I,y]=(0,N.useState)([]),[z,D]=(0,N.useState)(""),[v,T]=(0,N.useState)([]),[F,O]=(0,N.useState)([]),A=(0,r.Z)("(max-width: 600px)"),R=async a=>{O(a),p(!0),console.log(a);try{let s=await fetch(E.x.url+"/receipts/consult/ConsignmentDetail?ID=".concat(e.IDSaler,"&data=").concat(a.ID),{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("Error en la solicitud: ".concat(s.status));let n=await s.json();y(n),console.log(n)}catch(e){console.log("Error al obtener los datos del recibo",e)}},B=()=>{O(null),p(!1)};(0,N.useEffect)(()=>{(async()=>{try{let a=await fetch(E.x.url+"/consignments/list",{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Error en la solicitud: ".concat(a.status));let n=(await a.json()).filter(a=>a.UserFullName===e.UserFullName);s(n),T(n)}catch(e){console.log("Error al adquirir los datos",e)}})()},[]);let P=e=>{s(v.filter(a=>Object.values(a).map(e=>e?e.toString().toLowerCase():"").some(a=>a.includes(e.toLowerCase()))))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Z,{}),(0,n.jsxs)(w.Z,{container:!0,direction:"column",sx:{minHeight:"100vh",backfroundColor:"#ffffff",padding:2},children:[(0,n.jsx)(w.Z,{size:12,children:(0,n.jsxs)(l.Z,{sx:{display:"flex",flexDirection:A?"column":"row",alignItems:"center"},children:[(0,n.jsx)("h2",{children:(0,n.jsx)("strong",{children:"CONSIGNACIONES"})}),(0,n.jsx)(l.Z,{sx:{display:"flex",flexDirection:A?"column":"row",alignItems:"center",marginLeft:A?0:"auto",padding:2},children:(0,n.jsx)(o.Z,{id:"outlined-basic",label:"Buscar...",multiline:!0,rows:1,variant:"outlined",value:z,onChange:e=>{D(e.target.value),P(e.target.value)},sx:{width:A?300:400}})})]})}),(0,n.jsx)(w.Z,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,n.jsx)(l.Z,{sx:{width:"100%",height:A?500:755},children:(0,n.jsx)(b._,{rows:a,columns:k,getRowId:e=>e.ID,initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20],onRowClick:e=>R(e.row)})})})]}),(0,n.jsx)(t.Z,{open:i,onClose:B,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)(l.Z,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"800px",height:"90%",height:"70vh",overflowY:"auto",margin:"auto",mt:4,p:2},children:[(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("strong",{children:"DETALLE DE CONSIGNACI\xd3N"}),(0,n.jsx)(d.Z,{}),F&&(0,n.jsxs)(w.Z,{container:!0,rowSpacing:1.5,columnSpacing:{xs:1,sm:2,md:3},sx:{p:1},children:[(0,n.jsxs)(w.Z,{size:{xs:10,sm:8,md:6},children:[(0,n.jsx)("strong",{children:"Banco: "}),F.BankName]}),(0,n.jsxs)(w.Z,{size:{xs:10,sm:8,md:6},children:[(0,n.jsx)("strong",{children:"Numero de Consignaci\xf3n: "}),F.ConsignmentNumber]}),(0,n.jsxs)(w.Z,{size:{xs:8,sm:6,md:4},children:[(0,n.jsx)("strong",{children:"Fecha: "}),F.Date]}),(0,n.jsxs)(w.Z,{size:{xs:8,sm:6,md:4},children:[(0,n.jsx)("strong",{children:"Elaborada Por: "}),F.UserFullName]}),(0,n.jsxs)(w.Z,{size:{xs:8,sm:6,md:4},children:[(0,n.jsx)("strong",{children:"Total Consignaci\xf3n: "}),F.Ammount]})]}),F&&(0,n.jsx)(o.Z,{id:"outlined-basic",multiline:!0,rows:2,defaultValue:F.Comentarios,variant:"outlined",label:"Comentarios",sx:{width:"100%",mb:2}})]}),(0,n.jsx)(c.Z,{component:h.Z,children:(0,n.jsxs)(m.Z,{sx:{width:"100%",heigth:"auto"},size:"small","aria-label":"simple table",children:[(0,n.jsx)(x.Z,{children:(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(S,{children:"N\xb0 Recibo"}),(0,n.jsx)(S,{children:"Nit"}),(0,n.jsx)(S,{children:"Raz\xf3n Social"}),(0,n.jsx)(S,{children:"Fecha Recibo"}),(0,n.jsx)(S,{children:"Valor Recibo"}),(0,n.jsx)(S,{children:"Registrado Por"}),(0,n.jsx)(S,{children:"Estado"})]})}),(0,n.jsx)(j.Z,{children:Array.isArray(I)&&I.map(e=>(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(f.Z,{children:e.CONSECUTIVO}),(0,n.jsx)(f.Z,{children:e.NIT}),(0,n.jsx)(f.Z,{children:e.RazonSocial}),(0,n.jsx)(f.Z,{children:e.FECHA}),(0,n.jsx)(f.Z,{children:e.TOTAL}),(0,n.jsx)(f.Z,{children:e.U1}),(0,n.jsx)(f.Z,{children:e.StateName})]},e.ID))})]})}),(0,n.jsx)(l.Z,{sx:{display:"flex",justifyContent:"flex-end",margin:2},children:(0,n.jsx)(g.Z,{variant:"contained",onClick:B,children:"Cerrar"})})]})})]})}}},function(e){e.O(0,[9461,4759,1513,1929,5202,6934,2398,6920,7703,2971,7023,1744],function(){return e(e.s=78073)}),_N_E=e.O()}]);