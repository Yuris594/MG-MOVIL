(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{50525:function(e,t,n){Promise.resolve().then(n.bind(n,56990))},56990:function(e,t,n){"use strict";n.r(t),n.d(t,{Copyright:function(){return C}});var r=n(57437),o=n(46387),a=n(31691),i=n(70899),s=n(2069),l=n(71495),c=n(71004),u=n(53410),d=n(77584),h=n(94013),x=n(73986),m=n(62177),g=n(10932),p=n(99376),f=n(15735),S=n(41698),v=n(2265),j=n(31448);let y=v.forwardRef(function(e,t){return(0,r.jsx)(f.Z,{elevation:6,ref:t,...e})});function C(e){return(0,r.jsxs)(o.Z,{variant:"body2",color:"text.secondary",align:"center",...e,children:["Departamento de Sistemas \xa9 ",new Date().getFullYear(),"."]})}let w=async(e,t)=>{let n=await fetch(S.x.url+"/users/username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserName:e,UserPass:t})});return n.ok?n.json():404===n.status?{error:{detail:"Credenciales incorrectas"}}:{error:{detail:"Error desconocido"}}};t.default=function(){let e=(0,p.useRouter)(),{login:t,auth:n}=(0,g.a)(),[f,S]=(0,v.useState)(""),[b,Z]=(0,v.useState)(!1),[k,O]=(0,v.useState)(!1),[I,N]=(0,v.useState)(!1),[U,_]=(0,v.useState)("");(0,a.Z)(),(0,i.Z)("(max-width: 600px)"),(0,j._)();let E=async n=>{n.preventDefault();try{let n=await w(U,f);n.error?(N(!0),O(!0)):(Z(!0),t(n),e.push("../pages"))}catch(e){N(!0),O(!0),console.log("Error en la pagina Iniciar Sesi\xf3n",e)}},J=e=>{"clicaway"!==e&&(Z(!1),O(!1))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{sx:{flexGrow:1},children:(0,r.jsx)(l.Z,{position:"static",sx:{bgcolor:"#262626",height:"70px",overflow:"hidden"},children:(0,r.jsx)(c.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:(0,r.jsx)(o.Z,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:"\xa1Bienvenido"})})})}),(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",mt:5},children:(0,r.jsxs)(u.Z,{component:"main",elevation:3,sx:{width:"380px",padding:"20px",borderRadius:"15px",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",boxShadow:3},children:[(0,r.jsx)(s.Z,{sx:{textAlign:"center",marginBottom:"20px",width:{xs:"250px",sm:"280px",md:"320px"},height:"auto"},children:(0,r.jsx)("img",{src:"/logo_miguelgomez.png",alt:"LOGO",style:{width:"100%",height:"auto",objectFit:"contain"}})}),(0,r.jsxs)(s.Z,{component:"form",onSubmit:E,noValidate:!0,sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,r.jsx)(o.Z,{variant:"body2",align:"center",sx:{color:"#757575",marginBottom:"20px"},children:"Utilice su Usuario y Contrase\xf1a"}),(0,r.jsx)(d.Z,{error:I,id:"usuario",label:"Usuario",margin:"normal",fullWidth:!0,name:"PER_Usuario",value:U,onChange:e=>_(e.target.value)}),(0,r.jsx)(d.Z,{error:I,margin:"normal",required:!0,fullWidth:!0,type:"password",name:"PER_Clave",id:"contrase\xf1a",label:"Contrase\xf1a",value:f,onChange:e=>S(e.target.value)}),(0,r.jsx)(h.Z,{type:"submit",fullWidth:!0,sx:{mt:2,backgroundColor:"#11eb6c",color:"white","$:hover":{backgroundColor:"#35eb11"}},children:"Iniciar sesi\xf3n"})]}),(0,r.jsx)(C,{sx:{mt:3,mb:1}})]})}),b?(0,r.jsx)(x.Z,{open:b,autoHideDuration:6e3,onClose:J,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,r.jsx)(y,{onClose:J,variant:"filled",icon:(0,r.jsx)(m.Z,{fontSize:"inherit"}),severity:"success",sx:{width:"100%"},children:"Inicio de sesi\xf3n exitosa. \xa1Bienvenido, ".concat(n.UserFullName,"!")})}):"",k?(0,r.jsx)(x.Z,{open:k,autoHideDuration:6e3,onClose:J,children:(0,r.jsx)(y,{onClose:J,variant:"filled",severity:"error",sx:{width:"100%"},children:"Usuario o contrase\xf1as incorrectas. Por favor, int\xe9ntalo nuevamente."})}):""]})}},41698:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});let r={url:"http://192.168.1.3:3010/api"}},10932:function(e,t,n){"use strict";n.d(t,{a:function(){return l}});var r=n(57437),o=n(2265),a=n(99376),i=n(27696);let s=(0,o.createContext)({login:e=>{},logout:()=>{}});t.default=e=>{let{children:t}=e,n=(0,a.useRouter)(),[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)({}),[h,x]=(0,o.useState)({}),[m,g]=(0,o.useState)({}),p=(0,o.useCallback)(function(e){document.cookie=(0,i.qC)("auth",JSON.stringify(e.signedUser),{maxAge:604800,path:"/",httpOnly:!1,secure:!1,sameSite:"Strict"}),localStorage.setItem("auth",JSON.stringify(e.signedUser)),localStorage.setItem("Tokens",JSON.stringify(e.token)),c(e.signedUser)},[]),f=(0,o.useCallback)(function(e){document.cookie=(0,i.qC)("auth","",{maxAge:-1,path:"/"}),localStorage.removeItem("auth"),localStorage.removeItem("Tokens"),n.push("/")},[]);(0,o.useEffect)(()=>{let e=localStorage.getItem("auth"),t=localStorage.getItem("clienteV"),n=localStorage.getItem("pedidoV"),r=localStorage.getItem("cartera");e&&c(JSON.parse(e)),t&&d(JSON.parse(t)),n&&x(JSON.parse(n)),r&&g(JSON.parse(r))},[]),(0,o.useEffect)(()=>{let e=(0,i.Qc)(document.cookie||"");e.auth&&c(JSON.parse(e.auth))},[]);let S=(0,o.useMemo)(()=>({auth:l,login:p,logout:f,clienteV:u,setClienteV:d,pedidosV:h,setPedidosV:x,carteraV:m,setCarteraV:g}),[l,u,h,m,p,f]);return(0,r.jsx)(s.Provider,{value:S,children:t})};let l=()=>(0,o.useContext)(s)}},function(e){e.O(0,[173,3615,3859,7152,2971,2117,1744],function(){return e(e.s=50525)}),_N_E=e.O()}]);