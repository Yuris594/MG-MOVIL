(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7893],{7393:(e,a,t)=>{Promise.resolve().then(t.bind(t,57794))},57794:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>g});var r=t(95155),i=t(23165),o=t(22282),l=t(2572),n=t(19293),d=t(92608),s=t(51991),c=t(70689),h=t(64931),f=t(12115),u=t(30251),m=t(48097),x=t(78897),p=t.n(x);let C={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxHeight:"90vh",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,overflow:"auto",p:4},g=()=>{let{auth:e,setPedidosV:a}=(0,c.A)(),[t,x]=(0,f.useState)(!1),[g,b]=(0,f.useState)([]),[w,S]=(0,f.useState)([]),[N,v]=(0,f.useState)([]),[j,A]=(0,f.useState)(null),z=(0,i.A)("(max-width: 600px)"),E=e=>{A(e),x(!0)},O=()=>{x(!1),A(null)};(0,f.useEffect)(()=>{let e=(JSON.parse(localStorage.getItem("cotizacion"))||[]).map(e=>({...e,fechaFormateada:k(e.fecha)}));b(e),v(e)},[]);let k=e=>{let a=new Date(e),t=a.getDate().toString().padStart(2,"0"),r=(a.getMonth()+1).toString().padStart(2,"0"),i=a.getFullYear();return"".concat(r,"/").concat(t,"/").concat(i)},P=e=>{let a=g.filter(a=>a.PKId!==e.PKId);localStorage.setItem("cotizacion",JSON.stringify(a)),b(a)},I=e=>{b(N.filter(a=>Object.values(a).map(e=>e?e.toString().toLowerCase():"").some(a=>a.includes(e.toLowerCase()))))},y=async e=>{if(!(await p().fire({title:"Enviar PDF!",text:"\xbfDesea Enviar la Cotizaci\xf3n al Cliente?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"})).isConfirmed){p().fire({text:"El PDF no se envi\xf3.",icon:"info",timer:3e3});return}try{(await fetch(Global.url+"/cotizacion/enviarPdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e})})).ok&&p().fire({title:"\xa1\xc9xito!",text:"La Cotizaci\xf3n fue Enviada.",icon:"success",timer:3e3})}catch(e){console.error("Error generando el PDF:",e),p().fire({title:"Oops...!",text:"Hubo un problema al Enviar la Cotizaci\xf3n.",icon:"error"})}},F=[{field:"PKId",headerName:"No",width:80,headerClassName:"header-bold"},{field:"fechaFormateada",headerName:"FECHA",width:150,headerClassName:"header-bold"},{field:"nit",headerName:"NIT",width:150,headerClassName:"header-bold"},{field:"nombreC",headerName:"NOMBRE O RAZON SOCIAL",width:400,headerClassName:"header-bold"},{field:"enviar",headerName:"",width:100,renderCell:e=>(0,r.jsx)(o.A,{onClick:()=>y(e.row),"aria-label":"enviar",color:"success",sx:{fontSize:12},children:"Enviar PDF"})},{field:"editar",headerName:"",width:100,renderCell:e=>(0,r.jsx)(o.A,{onClick:()=>E(e.row),"aria-label":"editar",sx:{fontSize:12},children:"Modificar"})},{field:"actions",headerName:"",width:100,renderCell:e=>(0,r.jsx)(o.A,{onClick:()=>P(e.row),"aria-label":"cancel",color:"error",sx:{fontSize:12},children:"Eliminar"})}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{}),(0,r.jsxs)(m.A,{container:!0,direction:"column",sx:{minHeight:"100vh",backfroundColor:"#ffffff",padding:3},children:[(0,r.jsx)(m.A,{size:12,children:(0,r.jsxs)(l.A,{sx:{display:"flex",flexDirection:z?"column":"row",alignItems:"center",justifyContent:"space-between",mb:3},children:[(0,r.jsx)("h2",{children:(0,r.jsx)("strong",{children:"COTIZACI\xd3N"})}),(0,r.jsx)(n.A,{variant:"outlined",value:w,onChange:e=>{S(e.target.value),I(e.target.value),console.log(e.target.value)},label:"Buscar",sx:{width:z?"100%":350,backgroundColor:"#fff",borderRadius:2}})]})}),(0,r.jsx)(m.A,{size:12,sx:{flexGrow:1},children:(0,r.jsx)(l.A,{sx:{width:"100%",heigth:z?500:750,borderRadius:2},children:(0,r.jsx)(u.z,{rows:g,columns:F,getRowId:e=>e.PKId,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[5,10,15]})})})]}),(0,r.jsx)(d.A,{open:t,onClose:O,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,r.jsx)(l.A,{sx:C,children:(0,r.jsx)(h.default,{pedido:j,handleClose:O})})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[8320,6121,9293,4269,6251,251,1647,1991,4931,8441,1517,7358],()=>a(7393)),_N_E=e.O()}]);