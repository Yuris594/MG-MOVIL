(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2373],{52761:function(e,i,s){Promise.resolve().then(s.bind(s,47229))},19492:function(e,i,s){"use strict";var o=s(59018),t=s(57437);i.Z=(0,o.Z)((0,t.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},10524:function(e,i,s){"use strict";var o=s(59018),t=s(57437);i.Z=(0,o.Z)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")},22051:function(e,i,s){"use strict";var o=s(59018),t=s(57437);i.Z=(0,o.Z)((0,t.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline")},87070:function(e,i,s){"use strict";var o=s(59018),t=s(57437);i.Z=(0,o.Z)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},80222:function(e,i,s){"use strict";var o=s(59018),t=s(57437);i.Z=(0,o.Z)((0,t.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V8l8 5 8-5zm-8-7L4 6h16z"}),"MailOutline")},17030:function(e,i,s){"use strict";var o=s(59018),t=s(57437);i.Z=(0,o.Z)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16"}),"MonetizationOn")},47229:function(e,i,s){"use strict";s.r(i);var o=s(57437),t=s(48024),r=s(79647),n=s(17156),a=s(76548),l=s(14595),c=s(37241),d=s(48965),h=s(92674),x=s(28027),m=s(86645),u=s(74691),j=s(87116),p=s(68884),f=s(60335),Z=s(83719),g=s(22051),C=s(48367),b=s(58292),S=s(17030),w=s(10524),N=s(80222),E=s(91097),y=s(19492),z=s(47703),R=s(87070),k=s(85800),v=s(86934),T=s(2265),O=s(16463),P=s(80219),F=s(89967),I=s(64379),A=s.n(I);let V=()=>{A().fire({icon:"error",title:"Oops...",text:"No hay recibos para este cliente"})},L=(0,t.ZP)(C.Z)(e=>{let{theme:i}=e;return{["&.".concat(b.Z.head)]:{backgroundColor:i.palette.common.black,color:i.palette.common.white},["&.".concat(b.Z.body)]:{fontSize:14}}}),U=async e=>{try{let i=await fetch(F.x.url+"/receipts/getCustomersReceipts/".concat(e.nit),{method:"GET",headers:{"Content-Type":"application/json"}});return await i.json()}catch(e){return console.error("Error fetching data:",e),[]}};i.default=()=>{let e=(0,O.useRouter)(),{clienteV:i}=(0,k.a)(),[s,t]=(0,T.useState)(null),[b,I]=(0,T.useState)(!1),[H,M]=(0,T.useState)(!1),[D,B]=(0,T.useState)(!1),[_,q]=(0,T.useState)([]),[G,W]=(0,T.useState)([]),[Y,J]=(0,T.useState)([]),[Q,K]=(0,T.useState)([]),[X,$]=(0,T.useState)(null),[ee,ei]=(0,T.useState)([]),[es,eo]=(0,T.useState)(null),et=(0,r.Z)("(max-width: 600px)");(0,T.useEffect)(()=>{(async()=>{if(i&&i.NIT){let e=await U({nit:i.NIT});e&&e.length>0?(W(e),ei(e)):V()}})()},[i]);let er=async e=>{eo(e),$(e.CONSECUTIVO),t(e.NIT),I(!0);try{let i=await fetch(F.x.url+"/receipts/receiptdetail/".concat(e.CONSECUTIVO,"?action=Consult"),{method:"GET",headers:{"Content-Type":"applicatiojn/json"}});if(!i.ok)throw Error("Error en la solicitud: ".concat(i.status));let s=await i.json();K(s.receipts)}catch(e){console.log("Error al obtener los datos del recibo",e)}if("Si"===e.HasChecks)try{let i=await fetch(F.x.url+"/receipts/receiptdetail/".concat(e.CONSECUTIVO,"?ProfileName=Administrador&action=Gettle&checks=Si"),{method:"GET",headers:{"Content-Type":"application/json"}}),s=await i.json();J(s.checks),console.log(s.checks)}catch(e){console.log("Error al obtener los datos del cheque",e)}else J([])},en=()=>{eo(null),I(!1)},ea=()=>{M(!1)},el=async()=>{if(!X||!s){A().fire({icon:"warning",title:"Datos Faltantes",text:"Por favor, asegurarse de que el N\xfamero de Recibo y el Nit est\xe9n definidos."});return}try{let e=await fetch(F.x.url+"/receipts/sendmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({consecutivo:X,nit:s})});if(e.ok){let i=e.json();en(),A().fire({position:"top-end",icom:"success",title:"Email Enviado con Exito!.",text:"".concat(i.text),showConfirmButton:!1,timer:2500})}else A().fire({icon:"error",title:"Oops...!",text:"Error al Enviar el Email."})}catch(e){A().fire({icon:"error",title:"Error en la Red",text:"No se pudo Enviar el Correo debido a un Problema de Red."})}},ec=()=>{B(!1)},ed=async()=>{if(!_){A().fire({icon:"warning",title:"Falta el N\xfamero de Recibo",text:"Por Favor, Ingresa el N\xfamero de Recibo."});return}let e={NumeroRecibo:es.ReciboFisico,NuevoRecibo:_};console.log(e);try{let i=await fetch(F.x.url+"/receipts/edit/".concat(X),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await i.json();if(ec(),s)A().fire({icon:"success",title:"N\xfamero Actualizado!",text:"El N\xfamero de Recibo fue Actualizado Correctamente."});else throw Error("Failed to update")}catch(e){console.error("Error al actualizar el n\xfamero",e),A().fire({icon:"error",title:"Error de Actualizaci\xf3n.",text:"No se pudo actualizar el n\xfamero de recibo."})}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(z.Z,{}),(0,o.jsxs)(P.Z,{container:!0,direction:"column",sx:{minHeight:"100vh",backfroundColor:"#ffffff",padding:2},children:[(0,o.jsx)(P.Z,{size:12,children:(0,o.jsxs)(n.Z,{sx:{display:"flex",flexDirection:et?"column":"row",alignItems:"center"},children:[(0,o.jsx)("strong",{children:"Recibos de "})," ",i.RazonSocial,",",(0,o.jsx)("strong",{children:" Nit: "})," ",i.NIT,(0,o.jsx)(n.Z,{sx:{display:"flex",flexDirection:et?"column":"row",alignItems:"center",marginLeft:et?0:"auto",padding:2},children:(0,o.jsx)(a.Z,{onClick:()=>{e.push("/pages/client")},startIcon:(0,o.jsx)(E.Z,{}),variant:"outlined",color:"secondary",children:"Regresar"})})]})}),(0,o.jsx)(l.Z,{}),(0,o.jsx)(P.Z,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,o.jsx)(n.Z,{sx:{width:"100%",height:et?500:660},children:ee.length>0&&(0,o.jsx)(v._,{rows:G,columns:[{field:"CONSECUTIVO",headerName:"Recibo",width:150},{field:"ReciboFisico",headerName:"Recibo Fisico",width:150},{field:"FECHA",headerName:"Fecha Recibo",width:190},{field:"U1",headerName:"Registrado Por",width:150},{field:"U2",headerName:"Asentado Por",width:150},{field:"TOTAL",headerName:"Total Recibo",width:150},{field:"HasChecks",headerName:"Cheques",width:150},{field:"StateName",headerName:"Estado",width:150}],getRowId:e=>e.CONSECUTIVO,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[10],onRowClick:e=>er(e.row)})})})]}),(0,o.jsx)(c.Z,{open:b,onClose:en,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,o.jsxs)(n.Z,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"850px",width:"90%",height:"90vh",overflowY:"auto",margin:"auto",mt:4,p:2},children:[(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("strong",{children:"DETALLE DE RECIBO"}),(0,o.jsx)(l.Z,{}),es&&(0,o.jsxs)(P.Z,{container:!0,rowSpacing:1.5,columnSpacing:{xs:1,sm:2,md:3},sx:{p:1},children:[(0,o.jsxs)(P.Z,{size:{xs:9,sm:6,md:3},children:[(0,o.jsx)("strong",{children:"Recibo: "}),es.CONSECUTIVO]}),(0,o.jsxs)(P.Z,{size:{xs:12,sm:8,md:4},children:[(0,o.jsx)("strong",{children:"Fecha: "}),es.FECHA]}),(0,o.jsxs)(P.Z,{size:{xs:12,sm:8,md:4},children:[(0,o.jsx)("strong",{children:"Nit: "}),es.NIT]}),(0,o.jsxs)(P.Z,{size:{xs:27,sm:18,md:9},children:[(0,o.jsx)("strong",{children:"Raz\xf3n Social: "}),es.RazonSocial]}),(0,o.jsxs)(P.Z,{size:{xs:18,sm:12,md:6},children:[(0,o.jsx)("strong",{children:"Registrado Por: "}),es.U1]}),(0,o.jsxs)(P.Z,{size:{xs:18,sm:12,md:6},children:[(0,o.jsx)("strong",{children:"Asentado Por: "}),es.U2]}),(0,o.jsxs)(P.Z,{size:{xs:12,sm:8,md:4},children:[(0,o.jsx)("strong",{children:"Estado: "}),es.StateName]}),(0,o.jsxs)(P.Z,{size:{xs:12,sm:8,md:4},children:[(0,o.jsx)("strong",{children:"Recibo Fisico: "}),es.ReciboFisico]}),(0,o.jsxs)(P.Z,{size:{xs:12,sm:8,md:4},children:[(0,o.jsx)("strong",{children:"Recibo SoftLand: "}),es.ReciboSoftland]})]}),es&&(0,o.jsx)(d.Z,{id:"outlined-basic",multiline:!0,size:"small",defaultValue:es.Comentarios,variant:"outlined",label:"Comentarios",sx:{width:"100%",mb:2}})]}),(0,o.jsx)(h.Z,{component:x.Z,children:(0,o.jsxs)(m.Z,{sx:{width:"100%",maxHeight:"6ovh",overflowY:"auto"},size:"small","aria-label":"simple table",children:[(0,o.jsx)(u.Z,{children:(0,o.jsxs)(j.Z,{children:[(0,o.jsx)(L,{children:"Documento"}),(0,o.jsx)(L,{children:"Valor Cancelado"})]})}),(0,o.jsxs)(p.Z,{children:[Array.isArray(Q)&&Q.map(e=>(0,o.jsxs)(j.Z,{children:[(0,o.jsx)(C.Z,{children:e.NumeroDocumento}),(0,o.jsx)(C.Z,{children:e.ValorCancelado})]},e.NumeroDocumento)),(0,o.jsxs)(j.Z,{children:[(0,o.jsx)(C.Z,{align:"right",children:(0,o.jsx)("strong",{children:"TOTAL"})}),(0,o.jsx)(C.Z,{align:"right",children:(0,o.jsx)("strong",{children:null==es?void 0:es.TOTAL})})]})]})]})}),(0,o.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(null==es?void 0:es.HasChecks)==="Si"&&(0,o.jsx)(f.Z,{onClick:()=>{M(!0)},title:"Ver Cheques",children:(0,o.jsx)(S.Z,{sx:{fontSize:40,color:"#f31919"}})}),(0,o.jsx)(f.Z,{onClick:el,title:"Reenviar Por Correo",children:(0,o.jsx)(N.Z,{sx:{fontSize:40},color:"primary"})}),(0,o.jsx)(f.Z,{onClick:()=>{B(!0)},title:"Editar Recibo",children:(0,o.jsx)(R.Z,{sx:{fontSize:40},color:"secondary"})}),(0,o.jsx)(f.Z,{onClick:en,title:"Salir",children:(0,o.jsx)(g.Z,{sx:{fontSize:40},color:"success"})})]})]})}),(0,o.jsx)(c.Z,{open:H,onClose:ea,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,o.jsx)(n.Z,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"650px",width:"90%",height:"32vh",overflowY:"auto",margin:"auto",mt:4,p:2},children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("strong",{children:"RELACI\xd3N DE CHEQUES"}),(0,o.jsx)(l.Z,{}),Array.isArray(Y)&&Y.map((e,i)=>(0,o.jsxs)(P.Z,{container:!0,rowSpacing:1.5,columnSpacing:{xs:1,sm:2,md:3},sx:{p:1},children:[(0,o.jsxs)(P.Z,{size:{xs:18,sm:12,md:6},children:[(0,o.jsx)("strong",{children:"Banco: "}),e.bank]}),(0,o.jsxs)(P.Z,{size:{xs:18,sm:12,md:6},children:[(0,o.jsx)("strong",{children:"N\xfamero de Cheque: "}),e.checkNumber]}),(0,o.jsxs)(P.Z,{size:{xs:18,sm:12,md:6},children:[(0,o.jsx)("strong",{children:"Fecha: "}),e.checkDate]}),(0,o.jsxs)(P.Z,{size:{xs:18,sm:12,md:6},children:[(0,o.jsx)("strong",{children:"Valor: "}),e.value]})]},i)),(0,o.jsx)(n.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,o.jsx)(a.Z,{onClick:ea,color:"success",children:"Cerrar"})})]})})}),(0,o.jsx)(c.Z,{open:D,onClose:ec,BackdropProps:{onClick:e=>e.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,o.jsxs)(n.Z,{sx:{p:4,backgroundColor:"white",borderRadius:"8px",maxWidth:"500px",margin:"auto",mt:4},children:[(0,o.jsx)("strong",{children:"Editar Recibo Fisico"}),(0,o.jsx)(l.Z,{}),(0,o.jsx)(Z.Z,{children:"N\xfamero de Recibo: "}),(0,o.jsx)(d.Z,{variant:"outlined",fullWidth:!0,value:_,onChange:e=>q(e.target.value)}),(0,o.jsx)(l.Z,{}),(0,o.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[(0,o.jsx)(f.Z,{color:"success",onClick:ed,children:(0,o.jsx)(w.Z,{sx:{fontSize:40}})}),(0,o.jsx)(f.Z,{color:"error",onClick:ec,children:(0,o.jsx)(y.Z,{sx:{fontSize:40}})})]})]})})]})}}},function(e){e.O(0,[9461,5148,8965,3083,1092,6934,2398,6920,7703,2971,7023,1744],function(){return e(e.s=52761)}),_N_E=e.O()}]);