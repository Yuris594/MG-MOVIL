(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6261],{51142:function(e,t,a){Promise.resolve().then(a.bind(a,44964))},59415:function(e,t,a){"use strict";a.d(t,{zK:function(){return r}});var i=a(68470);let r=async()=>await (0,i.X3)("IDBService",1,{upgrade(e){e.createObjectStore("articles",{keyPath:"PKcodigo"}),e.createObjectStore("cartera",{keyPath:"Documento"}),e.createObjectStore("customers",{keyPath:"NIT"})}})},44964:function(e,t,a){"use strict";a.r(t);var i=a(57437),r=a(79647),o=a(48965),n=a(17156),l=a(76548),s=a(14595),d=a(59415),c=a(86934),u=a(2265),h=a(80219);t.default=e=>{let{handleClose:t,onAgregarArticulo:a}=e,[g,m]=(0,u.useState)([]),[f,x]=(0,u.useState)(""),[p,w]=(0,u.useState)({}),[j,N]=(0,u.useState)([]),v=(0,r.Z)("(max-width: 600px)");(0,u.useEffect)(()=>{(async()=>{try{let e=await (0,d.zK)(),t=await e.getAll("articles");t.length>0?(m(t),N(t),console.log("Datos cargados desde la base de datos")):console.log("No se encontraron art\xedculos en la base de datos.")}catch(e){console.log("Error al obtener los productos:",e)}})()},[]);let b=(e,t)=>{w({...p,[e]:t})},C=e=>{m(j.filter(t=>Object.values(t).map(e=>e?e.toString().toLowerCase():"").some(t=>t.includes(e.toLowerCase()))))};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(h.Z,{container:!0,direction:"column",sx:{minHeight:"100vh",backfroundColor:"#ffffff",padding:2},children:[(0,i.jsx)(h.Z,{size:12,children:(0,i.jsxs)(n.Z,{sx:{display:"flex",flexDirection:v?"column":"row",alignItems:"center",gap:2,marginBottom:2},children:[(0,i.jsx)("h2",{children:(0,i.jsx)("strong",{children:"SELECCIONAR ARTICULO"})}),(0,i.jsxs)(n.Z,{sx:{display:"flex",flexDirection:v?"column":"row",alignItems:"center",gap:2,marginLeft:v?0:"auto",width:v?"100%":"auto"},children:[(0,i.jsx)(l.Z,{variant:"outlined",color:"success",sx:{margin:1},onClick:()=>{a(g.filter(e=>p[e.PKcodigo]).map(e=>({...e,cantped:p[e.PKcodigo]}))),t()},children:"Agregar"}),(0,i.jsx)(l.Z,{variant:"contained",color:"error",onClick:t,children:"Cerrar"})]})]})}),(0,i.jsx)(s.Z,{}),(0,i.jsx)(h.Z,{size:12,sx:{padding:2},children:(0,i.jsx)(o.Z,{id:"outlined-basic",label:"Digite Codigo o Referencia para Buscar",multiline:!0,rows:1,variant:"outlined",value:f,onChange:e=>{e.preventDefault(),x(e.target.value),C(e.target.value)},sx:{width:"100%"}})}),(0,i.jsx)(h.Z,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,i.jsx)(n.Z,{sx:{width:"100%",height:v?500:820},children:(0,i.jsx)(c._,{density:"compact",rows:g,columns:[{field:"PKcodigo",headerName:"Cod",width:100},{field:"Nombre",headerName:"Referencia",width:280},{field:"Unidad_Empaque",headerName:"Emp",width:80},{field:"Precio",headerName:"Precio",width:90,editable:!0,valueFormatter:e=>{let t=Number(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString())}},{field:"Iva",headerName:"Iva",width:80},{field:"Descuento",headerName:"Des",width:80,editable:!0},{field:"cantped",headerName:"Cant",width:100,renderCell:e=>(0,i.jsx)(o.Z,{size:"small",value:p[e.id]||"",onChange:t=>b(e.id,t.target.value),sx:{width:"70px",height:"20px"}})},{field:"Precio_Neto",headerName:"Neto",width:80,valueFormatter:e=>{let t=Number(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString())}},{field:"Disp",headerName:"Disp",width:80}],getRowId:e=>e.PKcodigo,processRowUpdate:e=>{let t=g.map(t=>t.PKcodigo===e.PKcodigo?{...t,...e}:t);return m(t),N(t),e},initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20]})})})]})})}}},function(e){e.O(0,[4759,1513,1929,5202,6934,2971,7023,1744],function(){return e(e.s=51142)}),_N_E=e.O()}]);