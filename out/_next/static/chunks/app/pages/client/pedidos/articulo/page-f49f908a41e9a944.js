(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6968],{12852:(e,t,a)=>{Promise.resolve().then(a.bind(a,54941))},6283:(e,t,a)=>{"use strict";a.d(t,{Xv:()=>r});var i=a(10733);let r=async()=>await (0,i.P2)("IDBService",1,{upgrade(e){e.createObjectStore("articles",{keyPath:"PKcodigo"}),e.createObjectStore("cartera",{keyPath:"Documento"}),e.createObjectStore("customers",{keyPath:"NIT"})}})},54941:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var i=a(95155),r=a(23165),o=a(19293),l=a(2572),s=a(22282),d=a(2241),n=a(6283),c=a(30251),h=a(12115),g=a(48097);let u=e=>{let{handleClose:t,onAgregarArticulo:a}=e,[u,m]=(0,h.useState)([]),[p,x]=(0,h.useState)(""),[f,w]=(0,h.useState)({}),[v,j]=(0,h.useState)([]),N=(0,r.A)("(max-width: 600px)");(0,h.useEffect)(()=>{(async()=>{try{let e=await (0,n.Xv)(),t=await e.getAll("articles");t.length>0?(m(t),j(t),console.log("Datos cargados desde la base de datos")):console.log("No se encontraron art\xedculos en la base de datos.")}catch(e){console.log("Error al obtener los productos:",e)}})()},[]);let A=(e,t)=>{w({...f,[e]:t})},C=e=>{m(v.filter(t=>Object.values(t).map(e=>e?e.toString().toLowerCase():"").some(t=>t.includes(e.toLowerCase()))))},b=[{field:"PKcodigo",headerName:"Cod",width:100},{field:"Nombre",headerName:"Referencia",width:280},{field:"Unidad_Empaque",headerName:"Emp",width:80},{field:"Precio",headerName:"Precio",width:90,editable:!0,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString())}},{field:"Iva",headerName:"Iva",width:80},{field:"Descuento",headerName:"Des",width:80,editable:!0},{field:"cantped",headerName:"Cant",width:100,renderCell:e=>(0,i.jsx)(o.A,{size:"small",value:f[e.id]||"",onChange:t=>A(e.id,t.target.value),sx:{width:"70px",height:"20px"}})},{field:"Precio_Neto",headerName:"Neto",width:80,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString())}},{field:"Disp",headerName:"Disp",width:80}];return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(g.A,{container:!0,direction:"column",sx:{minHeight:"100vh",backfroundColor:"#ffffff",padding:2},children:[(0,i.jsx)(g.A,{size:12,children:(0,i.jsxs)(l.A,{sx:{display:"flex",flexDirection:N?"column":"row",alignItems:"center",gap:2,marginBottom:2},children:[(0,i.jsx)("h2",{children:(0,i.jsx)("strong",{children:"SELECCIONAR ARTICULO"})}),(0,i.jsxs)(l.A,{sx:{display:"flex",flexDirection:N?"column":"row",alignItems:"center",gap:2,marginLeft:N?0:"auto",width:N?"100%":"auto"},children:[(0,i.jsx)(s.A,{variant:"outlined",color:"success",sx:{margin:1},onClick:()=>{a(u.filter(e=>f[e.PKcodigo]).map(e=>({...e,cantped:f[e.PKcodigo]}))),t()},children:"Agregar"}),(0,i.jsx)(s.A,{variant:"contained",color:"error",onClick:t,children:"Cerrar"})]})]})}),(0,i.jsx)(d.A,{}),(0,i.jsx)(g.A,{size:12,sx:{padding:2},children:(0,i.jsx)(o.A,{id:"outlined-basic",label:"Digite Codigo o Referencia para Buscar",multiline:!0,rows:1,variant:"outlined",value:p,onChange:e=>{e.preventDefault(),x(e.target.value),C(e.target.value)},sx:{width:"100%"}})}),(0,i.jsx)(g.A,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,i.jsx)(l.A,{sx:{width:"100%",height:N?500:820},children:(0,i.jsx)(c.z,{density:"compact",rows:u,columns:b,getRowId:e=>e.PKcodigo,processRowUpdate:e=>{let t=u.map(t=>t.PKcodigo===e.PKcodigo?{...t,...e}:t);return m(t),j(t),e},initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20]})})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3509,4017,4269,5065,251,8441,1517,7358],()=>t(12852)),_N_E=e.O()}]);